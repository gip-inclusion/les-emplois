{% load bootstrap4 %}
{% load static %}
{% load folds %}

<h4>Informations complémetaires</h4>

<form method="POST" action="{% url "employee_record_views:create_step_5" job_application.id %}" class="js-prevent-multiple-submit">
        
    {% bootstrap_form_errors form %}

    {% csrf_token %}

    {% bootstrap_field form.education_level %}
    {% bootstrap_field form.resourceless %}

    {% bootstrap_field form.pole_emploi %}
    <div id="fold_pole_emploi" class="ml-1 pl-4 border-left border-primary {{ form.pole_emploi.value|fold_class }}">
        {% bootstrap_field form.pole_emploi_id %}
        {% bootstrap_field form.pole_emploi_since %}
    </div>

    {% bootstrap_field form.rqth_employee %}
    {% bootstrap_field form.oeth_employee %}

    {% bootstrap_field form.rsa_allocation %}
    <div id="fold_rsa_allocation" class="ml-1 pl-4 border-left border-primary {{ form.rsa_allocation.value|fold_class }}">
        {% bootstrap_field form.rsa_markup %}
        {% bootstrap_field form.rsa_allocation_since %}
    </div>

    {% bootstrap_field form.ass_allocation %}
    <div id="fold_ass_allocation" class="ml-1 pl-4 border-left border-primary {{ form.ass_allocation.value|fold_class }}">
        {% bootstrap_field form.ass_allocation_since %}
    </div>
    
    {% bootstrap_field form.aah_allocation %}
    <div id="fold_aah_allocation" class="ml-1 pl-4 border-left border-primary {{ form.aah_allocation.value|fold_class }}">
        {% bootstrap_field form.aah_allocation_since %}
    </div>

    {% bootstrap_field form.ata_allocation %}
    <div id="fold_ata_allocation" class="ml-1 pl-4 border-left border-primary {{ form.ata_allocation.value|fold_class }}">
        {% bootstrap_field form.ata_allocation_since %}
    </div>

    {% buttons %}
        <a class="btn btn btn-outline-secondary" href="{% url "employee_record_views:create_step_2" job_application.id %}">Précédent</a>
        <button type="submit" class="btn btn-primary">Continuer</button>
    {% endbuttons %}

</form>


{# A vérifier / optimiser #}

<script src="{% static "vendor/jquery-3.4.1/jquery.min.js" %}"></script>
<script>
    function toggleFold(elt) {
        var fold = '#fold_' + elt.name 
        if ($(elt).is(':checked')) {
            $(fold).removeClass("d-none")
        } else {
            $(fold).addClass("d-none")
        }}
</script>

