{% load format_filters %}
{% load matomo %}
{% load wording %}

<div class="personal-infos">
    <h2>Informations personnelles</h2>
    <hr>
    <div class="row mb-3">
        <div class="col-12 col-sm">
            <h3 class="mb-0">État civil</h3>
        </div>
        {% if allow_modify_job_seeker|default:False %}
            <div class="col-12 col-sm-auto mt-2 mt-sm-0 d-flex align-items-center">
                <a href="{% url "job_seekers_views:update_job_seeker_start" %}{% querystring job_seeker_public_id=job_seeker.public_id from_url=request.get_full_path %}"
                   class="btn btn-ico btn-outline-primary"
                   aria-label="Modifier les informations personnelles de {{ profile.user.get_full_name }}">
                    <i class="ri-pencil-line fw-medium" aria-hidden="true"></i>
                    <span>Modifier</span>
                </a>
            </div>
        {% endif %}
    </div>

    <ul class="list-data mb-3">
        <li>
            <small>Civilité</small>
            {% if profile.user.title %}
                <strong>{{ profile.user.get_title_display|title }}</strong>
            {% else %}
                <i class="text-warning">À renseigner</i>
            {% endif %}
        </li>
        <li>
            <small>Prénom</small>
            <strong>{{ profile.user.first_name|title }}</strong>
        </li>
        <li>
            <small>Nom</small>
            <strong>{{ profile.user.last_name|upper }}</strong>
        </li>
        <li>
            <small>Date de naissance</small>
            {% if profile.birthdate %}
                <strong>{{ profile.birthdate|date:"d/m/Y" }}</strong>
            {% else %}
                <i class="text-warning">À renseigner</i>
            {% endif %}
        </li>
        <li>
            <small>Pays de naissance</small>
            {% if profile.birth_country %}
                <strong>{{ profile.birth_country|title }}</strong>
            {% else %}
                <i class="text-warning">À renseigner</i>
            {% endif %}
        </li>
        {% if show_birth_place %}
            <li>
                <small>Commune de naissance</small>
                <strong>{{ profile.birth_place|title }}</strong>
            </li>
        {% endif %}
        <li>
            <small>Numéro de sécurité sociale</small>
            {% if profile.nir %}
                <strong>{{ profile.nir|format_nir }}</strong>
            {% elif profile.lack_of_nir_reason %}
                <strong>{{ profile.get_lack_of_nir_reason_display }}</strong>
            {% else %}
                <i class="text-disabled">Non renseigné</i>
            {% endif %}
        </li>
    </ul>

    <hr>
    <div class="row mb-3">
        <div class="col-12 col-sm">
            <h3 class="mb-0">Coordonnées</h3>
        </div>
    </div>

    <ul class="list-data mb-3">
        <li>
            <small>Adresse e-mail</small>
            {% if profile.user.email %}
                <strong>{{ profile.user.email }}</strong>
                {% matomo_event "candidat" "clic" "copied_jobseeker_email" as matomo_event_attrs %}
                {% include 'includes/copy_to_clipboard.html' with content=profile.user.email css_classes="btn-link" matomo_event_attrs=matomo_event_attrs only_icon=True %}
            {% else %}
                <i class="text-disabled">Non renseignée</i>
            {% endif %}
        </li>
        <li>
            <small>Téléphone</small>
            {% if profile.user.phone %}
                <strong>{{ profile.user.phone|format_phone }}</strong>
                {% matomo_event "candidat" "clic" "copied_sender_phone" as matomo_event_attrs %}
                {% include 'includes/copy_to_clipboard.html' with content=profile.user.phone|cut:" " css_classes="btn-link" matomo_event_attrs=matomo_event_attrs only_icon=True %}
            {% else %}
                <i class="text-disabled">Non renseigné</i>
            {% endif %}
        </li>
        <li>
            <small>Adresse</small>
            {% if profile.user.address_on_one_line %}
                <address>{{ profile.user.address_on_one_line }}</address>
            {% else %}
                <i class="text-warning">À renseigner</i>
            {% endif %}
        </li>
    </ul>

    <hr>
    <div class="row mb-3">
        <div class="col-12 col-sm">
            <h3 class="mb-0">Situation</h3>
        </div>
    </div>

    <ul class="list-data mb-3">
        <li>
            <small>Inscrit à France Travail depuis</small>
            {% if profile.pole_emploi_since %}
                <strong>{{ profile.get_pole_emploi_since_display|lower }}</strong>
            {% else %}
                <i class="text-disabled">Non renseigné</i>
            {% endif %}
        </li>
        <li>
            <small>Identifiant France Travail</small>
            {% if profile.pole_emploi_id %}
                <strong>{{ profile.pole_emploi_id }}</strong>
                {% include 'includes/copy_to_clipboard.html' with content=profile.pole_emploi_id css_classes="btn-link" only_icon=True %}
            {% else %}
                <i class="text-disabled">Non renseigné</i>
            {% endif %}
        </li>
        <li>
            <small>Niveau de formation</small>
            {% if profile.education_level %}
                <strong>{{ profile.get_education_level_display }}</strong>
            {% else %}
                <i class="text-disabled">Non renseigné</i>
            {% endif %}
        </li>
        <li>
            <small>Autres</small>
            {% if not other_infos %}
                <i class="text-disabled">Aucune information supplémentaire</i>
            {% elif other_infos|length > 1 %}
                <ul>
                    {% for item in other_infos %}<li>{{ profile|profile_field_display:item }}</li>{% endfor %}
                </ul>
            {% else %}
                <strong>{{ profile|profile_field_display:other_infos.0 }}</strong>
            {% endif %}
        </li>
    </ul>
</div>
