{% extends "layout/base.html" %}
{% load components %}
{% load django_bootstrap5 %}
{% load static %}

{% block title %}
    {% include "search/includes/siaes_search_title.html" %}
    {{ block.super }}
{% endblock %}

{% block global_messages %}
    {{ block.super }}
    {% if job_seeker %}
        {% include "apply/includes/applying_for_banner.html" with job_seeker=job_seeker can_view_personal_information=can_view_personal_information %}
    {% endif %}
{% endblock %}

{% block title_content %}
    {% component_title c_title__main=c_title__main c_title__cta=c_title__cta %}
        {% fragment as c_title__main %}
            <h1>Rechercher un emploi inclusif</h1>
        {% endfragment %}
        {% fragment as c_title__cta %}
            {% include "search/includes/save_search_button.html" with display_save_button=display_save_button disable_save_button=disable_save_button hx_swap_oob=False only %}
        {% endfragment %}
    {% endcomponent_title %}
{% endblock %}

{% block title_extra %}
    <div class="c-search mt-3 mt-md-4">
        <div class="c-search__bar">
            <form>
                {% include "search/includes/siaes_search_form.html" with form=form is_home=False only %}
                {% if job_seeker %}<input type="hidden" name="job_seeker_public_id" value="{{ job_seeker.public_id }}">{% endif %}
            </form>
        </div>
    </div>
    {% include "search/includes/saved_searches.html" with saved_searches=saved_searches hx_swap_oob=False only %}
    {% include "search/includes/siaes_search_tabs.html" %}
{% endblock %}

{% block content %}
    {% include "search/includes/siaes_search_content.html" %}
{% endblock %}

{% block modals %}
    {% if display_save_button %}
        <div class="modal fade" id="newSavedSearchModal" tabindex="-1" aria-labelledby="newSavedSearchModalLabel" aria-modal="true" role="dialog">
            {% include "search/includes/new_saved_search_modal_content.html" with form=new_saved_search_form display_save_button=display_save_button disable_save_button=disable_save_button request=request csrf_token=csrf_token hx_swap_oob=False only %}
        </div>
    {% endif %}
    <div class="modal fade" id="savedSearchesSettingsModal" tabindex="-1" aria-labelledby="savedSearchesSettingsModalLabel" aria-modal="true" role="dialog">
        {% include "search/includes/saved_searches_settings_modal_content.html" with saved_searches=saved_searches request=request csrf_token=csrf_token hx_swap_oob=False only %}
    </div>
{% endblock %}

{% block script %}
    {{ block.super }}
    <script src='{% static "js/htmx_compat.js" %}'></script>
    <script src='{% static "js/htmx_dropdown_filter.js" %}'></script>
    <script src='{% static "js/sliding_search.js"%}'></script>
{% endblock %}
