# serializer version: 1
# name: TestAcceptConfirmation.test_as_geiq[view queries]
  dict({
    'num_queries': 28,
    'queries': list([
      dict({
        'origin': list([
          'SessionStore._get_session_from_db[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          SELECT "django_session"."session_key",
                 "django_session"."session_data",
                 "django_session"."expire_date"
          FROM "django_session"
          WHERE ("django_session"."expire_date" > %s
                 AND "django_session"."session_key" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_companymembership"."id",
                 "companies_companymembership"."user_id",
                 "companies_companymembership"."joined_at",
                 "companies_companymembership"."is_admin",
                 "companies_companymembership"."is_active",
                 "companies_companymembership"."created_at",
                 "companies_companymembership"."updated_at",
                 "companies_companymembership"."company_id",
                 "companies_companymembership"."updated_by_id"
          FROM "companies_companymembership"
          WHERE ("companies_companymembership"."is_active"
                 AND "companies_companymembership"."user_id" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 EXISTS
            (SELECT %s AS "a"
             FROM "companies_siaeconvention" U0
             WHERE (U0."deactivated_at" >= %s
                    AND U0."id" = ("companies_company"."convention_id"))
             LIMIT 1) AS "has_convention_in_grace_period",
                 "companies_siaeconvention"."id",
                 "companies_siaeconvention"."kind",
                 "companies_siaeconvention"."siret_signature",
                 "companies_siaeconvention"."is_active",
                 "companies_siaeconvention"."deactivated_at",
                 "companies_siaeconvention"."reactivated_by_id",
                 "companies_siaeconvention"."reactivated_at",
                 "companies_siaeconvention"."asp_id",
                 "companies_siaeconvention"."created_at",
                 "companies_siaeconvention"."updated_at"
          FROM "companies_company"
          INNER JOIN "companies_companymembership" ON ("companies_company"."id" = "companies_companymembership"."company_id")
          LEFT OUTER JOIN "companies_siaeconvention" ON ("companies_company"."convention_id" = "companies_siaeconvention"."id")
          WHERE (NOT ("companies_company"."siret" = %s)
                 AND "companies_companymembership"."user_id" = %s
                 AND "companies_company"."id" IN (%s)
                 AND ("companies_company"."kind" IN (%s,
                                                     %s,
                                                     %s,
                                                     %s)
                      OR ("companies_company"."is_searchable"
                          AND "companies_company"."kind" = %s)
                      OR "companies_company"."source" = %s
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."id" = ("companies_company"."convention_id")
                                AND U0."is_active")
                         LIMIT 1)
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."deactivated_at" >= %s
                                AND U0."id" = ("companies_company"."convention_id"))
                         LIMIT 1)))
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_nexususer"."id",
                 "nexus_nexususer"."source",
                 "nexus_nexususer"."source_id",
                 "nexus_nexususer"."source_kind",
                 "nexus_nexususer"."first_name",
                 "nexus_nexususer"."last_name",
                 "nexus_nexususer"."email",
                 "nexus_nexususer"."phone",
                 "nexus_nexususer"."last_login",
                 "nexus_nexususer"."auth",
                 "nexus_nexususer"."kind",
                 "nexus_nexususer"."updated_at",
                 COALESCE(
                            (SELECT U0."valid_since" AS "valid_since"
                             FROM "nexus_nexusressourcesyncstatus" U0
                             WHERE U0."service" = ("nexus_nexususer"."source")
                             ORDER BY RANDOM() ASC
                             LIMIT 1), %s) AS "_threshold"
          FROM "nexus_nexususer"
          WHERE ("nexus_nexususer"."updated_at" >= (COALESCE(
                                                               (SELECT U0."valid_since" AS "valid_since"
                                                                FROM "nexus_nexusressourcesyncstatus" U0
                                                                WHERE U0."service" = ("nexus_nexususer"."source")
                                                                ORDER BY RANDOM() ASC
                                                                LIMIT 1), %s))
                 AND "nexus_nexususer"."email" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_activatedservice"."id",
                 "nexus_activatedservice"."user_id",
                 "nexus_activatedservice"."service",
                 "nexus_activatedservice"."created_at"
          FROM "nexus_activatedservice"
          WHERE "nexus_activatedservice"."user_id" = %s
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          (
             (SELECT %s AS "a"
              FROM "companies_companymembership"
              INNER JOIN "users_user" ON ("companies_companymembership"."user_id" = "users_user"."id")
              INNER JOIN "companies_company" ON ("companies_companymembership"."company_id" = "companies_company"."id")
              WHERE ("users_user"."is_active"
                     AND "companies_companymembership"."is_active"
                     AND "companies_company"."department" IN (%s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s)
                     AND "users_user"."email" = %s))
           UNION
             (SELECT %s AS "a"
              FROM "prescribers_prescribermembership"
              INNER JOIN "users_user" ON ("prescribers_prescribermembership"."user_id" = "users_user"."id")
              INNER JOIN "prescribers_prescriberorganization" ON ("prescribers_prescribermembership"."organization_id" = "prescribers_prescriberorganization"."id")
              WHERE ("users_user"."is_active"
                     AND "prescribers_prescribermembership"."is_active"
                     AND "prescribers_prescriberorganization"."department" IN (%s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s)
                     AND "users_user"."email" = %s)))
          UNION
            (SELECT %s AS "a"
             FROM "nexus_nexusmembership"
             INNER JOIN "nexus_nexusstructure" ON ("nexus_nexusmembership"."structure_id" = "nexus_nexusstructure"."id")
             INNER JOIN "nexus_nexususer" ON ("nexus_nexusmembership"."user_id" = "nexus_nexususer"."id")
             WHERE ("nexus_nexusmembership"."updated_at" >= (COALESCE(
                                                                        (SELECT U0."valid_since" AS "valid_since"
                                                                         FROM "nexus_nexusressourcesyncstatus" U0
                                                                         WHERE U0."service" = ("nexus_nexusmembership"."source")
                                                                         ORDER BY RANDOM() ASC
                                                                         LIMIT 1), %s))
                    AND "nexus_nexusstructure"."department" IN (%s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s)
                    AND "nexus_nexususer"."email" = %s))
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "job_applications_jobapplication"."id",
                 "job_applications_jobapplication"."job_seeker_id",
                 "job_applications_jobapplication"."eligibility_diagnosis_id",
                 "job_applications_jobapplication"."geiq_eligibility_diagnosis_id",
                 "job_applications_jobapplication"."create_employee_record",
                 "job_applications_jobapplication"."resume_id",
                 "job_applications_jobapplication"."sender_id",
                 "job_applications_jobapplication"."sender_kind",
                 "job_applications_jobapplication"."sender_company_id",
                 "job_applications_jobapplication"."sender_prescriber_organization_id",
                 "job_applications_jobapplication"."to_company_id",
                 "job_applications_jobapplication"."state",
                 "job_applications_jobapplication"."archived_at",
                 "job_applications_jobapplication"."archived_by_id",
                 "job_applications_jobapplication"."hired_job_id",
                 "job_applications_jobapplication"."message",
                 "job_applications_jobapplication"."answer",
                 "job_applications_jobapplication"."answer_to_prescriber",
                 "job_applications_jobapplication"."refusal_reason",
                 "job_applications_jobapplication"."refusal_reason_shared_with_job_seeker",
                 "job_applications_jobapplication"."hiring_start_at",
                 "job_applications_jobapplication"."hiring_end_at",
                 "job_applications_jobapplication"."origin",
                 "job_applications_jobapplication"."approval_id",
                 "job_applications_jobapplication"."approval_delivery_mode",
                 "job_applications_jobapplication"."approval_number_sent_by_email",
                 "job_applications_jobapplication"."approval_number_sent_at",
                 "job_applications_jobapplication"."approval_manually_delivered_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_at",
                 "job_applications_jobapplication"."transferred_at",
                 "job_applications_jobapplication"."transferred_by_id",
                 "job_applications_jobapplication"."transferred_from_id",
                 "job_applications_jobapplication"."created_at",
                 "job_applications_jobapplication"."updated_at",
                 "job_applications_jobapplication"."processed_at",
                 "job_applications_jobapplication"."prehiring_guidance_days",
                 "job_applications_jobapplication"."contract_type",
                 "job_applications_jobapplication"."nb_hours_per_week",
                 "job_applications_jobapplication"."contract_type_details",
                 "job_applications_jobapplication"."qualification_type",
                 "job_applications_jobapplication"."qualification_level",
                 "job_applications_jobapplication"."planned_training_hours",
                 "job_applications_jobapplication"."inverted_vae_contract",
                 "job_applications_jobapplication"."diagoriente_invite_sent_at",
                 "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update",
                 "users_jobseekerprofile"."user_id",
                 "users_jobseekerprofile"."birthdate",
                 "users_jobseekerprofile"."birth_place_id",
                 "users_jobseekerprofile"."birth_country_id",
                 "users_jobseekerprofile"."nir",
                 "users_jobseekerprofile"."lack_of_nir_reason",
                 "users_jobseekerprofile"."pole_emploi_id",
                 "users_jobseekerprofile"."lack_of_pole_emploi_id_reason",
                 "users_jobseekerprofile"."ft_gps_id",
                 "users_jobseekerprofile"."asp_uid",
                 "users_jobseekerprofile"."education_level",
                 "users_jobseekerprofile"."resourceless",
                 "users_jobseekerprofile"."rqth_employee",
                 "users_jobseekerprofile"."oeth_employee",
                 "users_jobseekerprofile"."pole_emploi_since",
                 "users_jobseekerprofile"."unemployed_since",
                 "users_jobseekerprofile"."has_rsa_allocation",
                 "users_jobseekerprofile"."rsa_allocation_since",
                 "users_jobseekerprofile"."ass_allocation_since",
                 "users_jobseekerprofile"."aah_allocation_since",
                 "users_jobseekerprofile"."are_allocation_since",
                 "users_jobseekerprofile"."activity_bonus_since",
                 "users_jobseekerprofile"."cape_freelance",
                 "users_jobseekerprofile"."cesa_freelance",
                 "users_jobseekerprofile"."actor_met_for_business_creation",
                 "users_jobseekerprofile"."mean_monthly_income_before_process",
                 "users_jobseekerprofile"."eiti_contributions",
                 "users_jobseekerprofile"."ase_exit",
                 "users_jobseekerprofile"."isolated_parent",
                 "users_jobseekerprofile"."housing_issue",
                 "users_jobseekerprofile"."refugee",
                 "users_jobseekerprofile"."detention_exit_or_ppsmj",
                 "users_jobseekerprofile"."low_level_in_french",
                 "users_jobseekerprofile"."mobility_issue",
                 "users_jobseekerprofile"."hexa_lane_number",
                 "users_jobseekerprofile"."hexa_std_extension",
                 "users_jobseekerprofile"."hexa_non_std_extension",
                 "users_jobseekerprofile"."hexa_lane_type",
                 "users_jobseekerprofile"."hexa_lane_name",
                 "users_jobseekerprofile"."hexa_additional_address",
                 "users_jobseekerprofile"."hexa_post_code",
                 "users_jobseekerprofile"."hexa_commune_id",
                 "users_jobseekerprofile"."pe_obfuscated_nir",
                 "users_jobseekerprofile"."pe_last_certification_attempt_at",
                 "users_jobseekerprofile"."created_by_prescriber_organization_id",
                 "users_jobseekerprofile"."is_stalled",
                 "users_jobseekerprofile"."is_not_stalled_anymore",
                 "users_jobseekerprofile"."fields_history",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "job_applications_jobapplication"
          INNER JOIN "companies_company" ON ("job_applications_jobapplication"."to_company_id" = "companies_company"."id")
          INNER JOIN "users_user" ON ("job_applications_jobapplication"."job_seeker_id" = "users_user"."id")
          LEFT OUTER JOIN "users_jobseekerprofile" ON ("users_user"."id" = "users_jobseekerprofile"."user_id")
          WHERE (EXISTS
                   (SELECT %s AS "a"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = ("job_applications_jobapplication"."to_company_id")
                           AND U0."user_id" = %s)
                    LIMIT 1)
                 AND "job_applications_jobapplication"."id" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'User.latest_approval[users/models.py]',
          'User.has_valid_approval[users/models.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "approvals_approval"."id",
                 "approvals_approval"."start_at",
                 "approvals_approval"."end_at",
                 "approvals_approval"."created_at",
                 "approvals_approval"."number",
                 "approvals_approval"."pe_notification_status",
                 "approvals_approval"."pe_notification_time",
                 "approvals_approval"."pe_notification_endpoint",
                 "approvals_approval"."pe_notification_exit_code",
                 "approvals_approval"."user_id",
                 "approvals_approval"."created_by_id",
                 "approvals_approval"."origin",
                 "approvals_approval"."eligibility_diagnosis_id",
                 "approvals_approval"."updated_at",
                 "approvals_approval"."origin_siae_siret",
                 "approvals_approval"."origin_siae_kind",
                 "approvals_approval"."origin_sender_kind",
                 "approvals_approval"."origin_prescriber_organization_kind",
                 "approvals_approval"."public_id"
          FROM "approvals_approval"
          WHERE "approvals_approval"."user_id" = %s
          ORDER BY "approvals_approval"."created_at" DESC
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T3."id",
                 T3."password",
                 T3."last_login",
                 T3."is_superuser",
                 T3."username",
                 T3."first_name",
                 T3."last_name",
                 T3."is_staff",
                 T3."is_active",
                 T3."date_joined",
                 T3."address_line_1",
                 T3."address_line_2",
                 T3."post_code",
                 T3."city",
                 T3."department",
                 T3."coords",
                 T3."geocoding_score",
                 T3."geocoding_updated_at",
                 T3."ban_api_resolved_address",
                 T3."insee_city_id",
                 T3."title",
                 T3."full_name_search_vector",
                 T3."email",
                 T3."phone",
                 T3."kind",
                 T3."identity_provider",
                 T3."has_completed_welcoming_tour",
                 T3."created_by_id",
                 T3."external_data_source_history",
                 T3."last_checked_at",
                 T3."public_id",
                 T3."address_filled_at",
                 T3."first_login",
                 T3."upcoming_deletion_notified_at",
                 T3."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          INNER JOIN "users_user" T3 ON ("eligibility_eligibilitydiagnosis"."author_id" = T3."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."author_kind" = %s
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'GEIQEligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_geiqeligibilitydiagnosis"."id",
                 "eligibility_geiqeligibilitydiagnosis"."author_id",
                 "eligibility_geiqeligibilitydiagnosis"."author_kind",
                 "eligibility_geiqeligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_geiqeligibilitydiagnosis"."created_at",
                 "eligibility_geiqeligibilitydiagnosis"."updated_at",
                 "eligibility_geiqeligibilitydiagnosis"."expires_at",
                 "eligibility_geiqeligibilitydiagnosis"."job_seeker_id",
                 "eligibility_geiqeligibilitydiagnosis"."author_geiq_id",
                 T5."id",
                 T5."password",
                 T5."last_login",
                 T5."is_superuser",
                 T5."username",
                 T5."first_name",
                 T5."last_name",
                 T5."is_staff",
                 T5."is_active",
                 T5."date_joined",
                 T5."address_line_1",
                 T5."address_line_2",
                 T5."post_code",
                 T5."city",
                 T5."department",
                 T5."coords",
                 T5."geocoding_score",
                 T5."geocoding_updated_at",
                 T5."ban_api_resolved_address",
                 T5."insee_city_id",
                 T5."title",
                 T5."full_name_search_vector",
                 T5."email",
                 T5."phone",
                 T5."kind",
                 T5."identity_provider",
                 T5."has_completed_welcoming_tour",
                 T5."created_by_id",
                 T5."external_data_source_history",
                 T5."last_checked_at",
                 T5."public_id",
                 T5."address_filled_at",
                 T5."first_login",
                 T5."upcoming_deletion_notified_at",
                 T5."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_geiqeligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_geiqeligibilitydiagnosis"."author_geiq_id" = "companies_company"."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_geiqeligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          INNER JOIN "users_user" T5 ON ("eligibility_geiqeligibilitydiagnosis"."author_id" = T5."id")
          WHERE ("eligibility_geiqeligibilitydiagnosis"."expires_at" > %s
                 AND "eligibility_geiqeligibilitydiagnosis"."job_seeker_id" = %s
                 AND ("eligibility_geiqeligibilitydiagnosis"."author_geiq_id" = %s
                      OR "eligibility_geiqeligibilitydiagnosis"."author_prescriber_organization_id" IS NOT NULL))
          ORDER BY "eligibility_geiqeligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'GEIQEligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT ("eligibility_geiqselectedadministrativecriteria"."eligibility_diagnosis_id") AS "_prefetch_related_val_eligibility_diagnosis_id",
                 "eligibility_geiqadministrativecriteria"."id",
                 "eligibility_geiqadministrativecriteria"."name",
                 "eligibility_geiqadministrativecriteria"."desc",
                 "eligibility_geiqadministrativecriteria"."written_proof",
                 "eligibility_geiqadministrativecriteria"."written_proof_url",
                 "eligibility_geiqadministrativecriteria"."written_proof_validity",
                 "eligibility_geiqadministrativecriteria"."kind",
                 "eligibility_geiqadministrativecriteria"."ui_rank",
                 "eligibility_geiqadministrativecriteria"."created_at",
                 "eligibility_geiqadministrativecriteria"."parent_id",
                 "eligibility_geiqadministrativecriteria"."annex",
                 "eligibility_geiqadministrativecriteria"."level",
                 "eligibility_geiqadministrativecriteria"."slug",
                 "eligibility_geiqadministrativecriteria"."api_code"
          FROM "eligibility_geiqadministrativecriteria"
          INNER JOIN "eligibility_geiqselectedadministrativecriteria" ON ("eligibility_geiqadministrativecriteria"."id" = "eligibility_geiqselectedadministrativecriteria"."administrative_criteria_id")
          WHERE "eligibility_geiqselectedadministrativecriteria"."eligibility_diagnosis_id" IN (%s)
          ORDER BY "eligibility_geiqadministrativecriteria"."level" ASC NULLS LAST,
                   "eligibility_geiqadministrativecriteria"."ui_rank" ASC
        ''',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_country"."id",
                 "asp_country"."code",
                 "asp_country"."name",
                 "asp_country"."group",
                 "asp_country"."department"
          FROM "asp_country"
          WHERE "asp_country"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'AcceptForm.__init__[www/apply/forms.py]',
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "companies_jobdescription"."id",
                 "companies_jobdescription"."appellation_id",
                 "companies_jobdescription"."company_id",
                 "companies_jobdescription"."created_at",
                 "companies_jobdescription"."updated_at",
                 "companies_jobdescription"."is_active",
                 "companies_jobdescription"."last_employer_update_at",
                 "companies_jobdescription"."custom_name",
                 "companies_jobdescription"."description",
                 "companies_jobdescription"."ui_rank",
                 "companies_jobdescription"."contract_type",
                 "companies_jobdescription"."other_contract_type",
                 "companies_jobdescription"."location_id",
                 "companies_jobdescription"."hours_per_week",
                 "companies_jobdescription"."open_positions",
                 "companies_jobdescription"."profile_description",
                 "companies_jobdescription"."is_resume_mandatory",
                 "companies_jobdescription"."is_qpv_mandatory",
                 "companies_jobdescription"."market_context_description",
                 "companies_jobdescription"."source_id",
                 "companies_jobdescription"."source_kind",
                 "companies_jobdescription"."source_url",
                 "companies_jobdescription"."source_tags",
                 "companies_jobdescription"."field_history",
                 "companies_jobdescription"."creation_source",
                 "jobs_appellation"."updated_at",
                 "jobs_appellation"."code",
                 "jobs_appellation"."name",
                 "jobs_appellation"."rome_id",
                 "jobs_appellation"."full_text",
                 "cities_city"."id",
                 "cities_city"."name",
                 "cities_city"."normalized_name",
                 "cities_city"."slug",
                 "cities_city"."department",
                 "cities_city"."post_codes",
                 "cities_city"."code_insee",
                 "cities_city"."coords",
                 "cities_city"."edition_mode",
                 "cities_city"."last_synced_at"
          FROM "companies_jobdescription"
          INNER JOIN "jobs_appellation" ON ("companies_jobdescription"."appellation_id" = "jobs_appellation"."code")
          LEFT OUTER JOIN "cities_city" ON ("companies_jobdescription"."location_id" = "cities_city"."id")
          WHERE "companies_jobdescription"."company_id" = %s
          ORDER BY "companies_jobdescription"."custom_name" ASC,
                   "companies_jobdescription"."is_active" ASC
        ''',
      }),
      dict({
        'origin': list([
          'JobApplication.clean[job_applications/models.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT %s AS "_check"
          WHERE COALESCE((((%s IN (%s, %s)
                            AND %s = %s
                            AND %s > %s)
                           OR (%s = %s
                               AND %s > %s
                               AND NOT (%s = %s)))), %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT %s AS "_check"
          WHERE COALESCE((NOT (%s = %s
                               AND %s = %s)), %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Company.has_job_descriptions_not_updated_recently[companies/models.py]',
          'IfNode[layout/base.html]',
          'BlockNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_confirmation_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "companies_jobdescription"
          WHERE ("companies_jobdescription"."company_id" = %s
                 AND "companies_jobdescription"."is_active"
                 AND "companies_jobdescription"."last_employer_update_at" < %s)
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Company.has_admin[common_apps/organizations/models.py]',
          'Company.convention_can_be_accessed_by[companies/models.py]',
          'nav[utils/templatetags/nav.py]',
          'InclusionNode[layout/_header_authenticated.html]',
          'IncludeNode[layout/base.html]',
          'IfNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_confirmation_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "users_user"
          INNER JOIN "companies_companymembership" ON ("users_user"."id" = "companies_companymembership"."user_id")
          WHERE ("companies_companymembership"."id" IN
                   (SELECT U0."id"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = %s
                           AND U0."is_admin"
                           AND U1."is_active"))
                 AND "users_user"."id" = %s)
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Session.save[<site-packages>/django/db/models/base.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          UPDATE "django_session"
          SET "session_data" = %s,
              "expire_date" = %s
          WHERE "django_session"."session_key" = %s
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
    ]),
  })
# ---
# name: TestAcceptConfirmation.test_as_iae[view queries]
  dict({
    'num_queries': 23,
    'queries': list([
      dict({
        'origin': list([
          'SessionStore._get_session_from_db[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          SELECT "django_session"."session_key",
                 "django_session"."session_data",
                 "django_session"."expire_date"
          FROM "django_session"
          WHERE ("django_session"."expire_date" > %s
                 AND "django_session"."session_key" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_companymembership"."id",
                 "companies_companymembership"."user_id",
                 "companies_companymembership"."joined_at",
                 "companies_companymembership"."is_admin",
                 "companies_companymembership"."is_active",
                 "companies_companymembership"."created_at",
                 "companies_companymembership"."updated_at",
                 "companies_companymembership"."company_id",
                 "companies_companymembership"."updated_by_id"
          FROM "companies_companymembership"
          WHERE ("companies_companymembership"."is_active"
                 AND "companies_companymembership"."user_id" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 EXISTS
            (SELECT %s AS "a"
             FROM "companies_siaeconvention" U0
             WHERE (U0."deactivated_at" >= %s
                    AND U0."id" = ("companies_company"."convention_id"))
             LIMIT 1) AS "has_convention_in_grace_period",
                 "companies_siaeconvention"."id",
                 "companies_siaeconvention"."kind",
                 "companies_siaeconvention"."siret_signature",
                 "companies_siaeconvention"."is_active",
                 "companies_siaeconvention"."deactivated_at",
                 "companies_siaeconvention"."reactivated_by_id",
                 "companies_siaeconvention"."reactivated_at",
                 "companies_siaeconvention"."asp_id",
                 "companies_siaeconvention"."created_at",
                 "companies_siaeconvention"."updated_at"
          FROM "companies_company"
          INNER JOIN "companies_companymembership" ON ("companies_company"."id" = "companies_companymembership"."company_id")
          LEFT OUTER JOIN "companies_siaeconvention" ON ("companies_company"."convention_id" = "companies_siaeconvention"."id")
          WHERE (NOT ("companies_company"."siret" = %s)
                 AND "companies_companymembership"."user_id" = %s
                 AND "companies_company"."id" IN (%s)
                 AND ("companies_company"."kind" IN (%s,
                                                     %s,
                                                     %s,
                                                     %s)
                      OR ("companies_company"."is_searchable"
                          AND "companies_company"."kind" = %s)
                      OR "companies_company"."source" = %s
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."id" = ("companies_company"."convention_id")
                                AND U0."is_active")
                         LIMIT 1)
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."deactivated_at" >= %s
                                AND U0."id" = ("companies_company"."convention_id"))
                         LIMIT 1)))
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_nexususer"."id",
                 "nexus_nexususer"."source",
                 "nexus_nexususer"."source_id",
                 "nexus_nexususer"."source_kind",
                 "nexus_nexususer"."first_name",
                 "nexus_nexususer"."last_name",
                 "nexus_nexususer"."email",
                 "nexus_nexususer"."phone",
                 "nexus_nexususer"."last_login",
                 "nexus_nexususer"."auth",
                 "nexus_nexususer"."kind",
                 "nexus_nexususer"."updated_at",
                 COALESCE(
                            (SELECT U0."valid_since" AS "valid_since"
                             FROM "nexus_nexusressourcesyncstatus" U0
                             WHERE U0."service" = ("nexus_nexususer"."source")
                             ORDER BY RANDOM() ASC
                             LIMIT 1), %s) AS "_threshold"
          FROM "nexus_nexususer"
          WHERE ("nexus_nexususer"."updated_at" >= (COALESCE(
                                                               (SELECT U0."valid_since" AS "valid_since"
                                                                FROM "nexus_nexusressourcesyncstatus" U0
                                                                WHERE U0."service" = ("nexus_nexususer"."source")
                                                                ORDER BY RANDOM() ASC
                                                                LIMIT 1), %s))
                 AND "nexus_nexususer"."email" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_activatedservice"."id",
                 "nexus_activatedservice"."user_id",
                 "nexus_activatedservice"."service",
                 "nexus_activatedservice"."created_at"
          FROM "nexus_activatedservice"
          WHERE "nexus_activatedservice"."user_id" = %s
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          (
             (SELECT %s AS "a"
              FROM "companies_companymembership"
              INNER JOIN "users_user" ON ("companies_companymembership"."user_id" = "users_user"."id")
              INNER JOIN "companies_company" ON ("companies_companymembership"."company_id" = "companies_company"."id")
              WHERE ("users_user"."is_active"
                     AND "companies_companymembership"."is_active"
                     AND "companies_company"."department" IN (%s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s)
                     AND "users_user"."email" = %s))
           UNION
             (SELECT %s AS "a"
              FROM "prescribers_prescribermembership"
              INNER JOIN "users_user" ON ("prescribers_prescribermembership"."user_id" = "users_user"."id")
              INNER JOIN "prescribers_prescriberorganization" ON ("prescribers_prescribermembership"."organization_id" = "prescribers_prescriberorganization"."id")
              WHERE ("users_user"."is_active"
                     AND "prescribers_prescribermembership"."is_active"
                     AND "prescribers_prescriberorganization"."department" IN (%s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s)
                     AND "users_user"."email" = %s)))
          UNION
            (SELECT %s AS "a"
             FROM "nexus_nexusmembership"
             INNER JOIN "nexus_nexusstructure" ON ("nexus_nexusmembership"."structure_id" = "nexus_nexusstructure"."id")
             INNER JOIN "nexus_nexususer" ON ("nexus_nexusmembership"."user_id" = "nexus_nexususer"."id")
             WHERE ("nexus_nexusmembership"."updated_at" >= (COALESCE(
                                                                        (SELECT U0."valid_since" AS "valid_since"
                                                                         FROM "nexus_nexusressourcesyncstatus" U0
                                                                         WHERE U0."service" = ("nexus_nexusmembership"."source")
                                                                         ORDER BY RANDOM() ASC
                                                                         LIMIT 1), %s))
                    AND "nexus_nexusstructure"."department" IN (%s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s)
                    AND "nexus_nexususer"."email" = %s))
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "job_applications_jobapplication"."id",
                 "job_applications_jobapplication"."job_seeker_id",
                 "job_applications_jobapplication"."eligibility_diagnosis_id",
                 "job_applications_jobapplication"."geiq_eligibility_diagnosis_id",
                 "job_applications_jobapplication"."create_employee_record",
                 "job_applications_jobapplication"."resume_id",
                 "job_applications_jobapplication"."sender_id",
                 "job_applications_jobapplication"."sender_kind",
                 "job_applications_jobapplication"."sender_company_id",
                 "job_applications_jobapplication"."sender_prescriber_organization_id",
                 "job_applications_jobapplication"."to_company_id",
                 "job_applications_jobapplication"."state",
                 "job_applications_jobapplication"."archived_at",
                 "job_applications_jobapplication"."archived_by_id",
                 "job_applications_jobapplication"."hired_job_id",
                 "job_applications_jobapplication"."message",
                 "job_applications_jobapplication"."answer",
                 "job_applications_jobapplication"."answer_to_prescriber",
                 "job_applications_jobapplication"."refusal_reason",
                 "job_applications_jobapplication"."refusal_reason_shared_with_job_seeker",
                 "job_applications_jobapplication"."hiring_start_at",
                 "job_applications_jobapplication"."hiring_end_at",
                 "job_applications_jobapplication"."origin",
                 "job_applications_jobapplication"."approval_id",
                 "job_applications_jobapplication"."approval_delivery_mode",
                 "job_applications_jobapplication"."approval_number_sent_by_email",
                 "job_applications_jobapplication"."approval_number_sent_at",
                 "job_applications_jobapplication"."approval_manually_delivered_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_at",
                 "job_applications_jobapplication"."transferred_at",
                 "job_applications_jobapplication"."transferred_by_id",
                 "job_applications_jobapplication"."transferred_from_id",
                 "job_applications_jobapplication"."created_at",
                 "job_applications_jobapplication"."updated_at",
                 "job_applications_jobapplication"."processed_at",
                 "job_applications_jobapplication"."prehiring_guidance_days",
                 "job_applications_jobapplication"."contract_type",
                 "job_applications_jobapplication"."nb_hours_per_week",
                 "job_applications_jobapplication"."contract_type_details",
                 "job_applications_jobapplication"."qualification_type",
                 "job_applications_jobapplication"."qualification_level",
                 "job_applications_jobapplication"."planned_training_hours",
                 "job_applications_jobapplication"."inverted_vae_contract",
                 "job_applications_jobapplication"."diagoriente_invite_sent_at",
                 "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update",
                 "users_jobseekerprofile"."user_id",
                 "users_jobseekerprofile"."birthdate",
                 "users_jobseekerprofile"."birth_place_id",
                 "users_jobseekerprofile"."birth_country_id",
                 "users_jobseekerprofile"."nir",
                 "users_jobseekerprofile"."lack_of_nir_reason",
                 "users_jobseekerprofile"."pole_emploi_id",
                 "users_jobseekerprofile"."lack_of_pole_emploi_id_reason",
                 "users_jobseekerprofile"."ft_gps_id",
                 "users_jobseekerprofile"."asp_uid",
                 "users_jobseekerprofile"."education_level",
                 "users_jobseekerprofile"."resourceless",
                 "users_jobseekerprofile"."rqth_employee",
                 "users_jobseekerprofile"."oeth_employee",
                 "users_jobseekerprofile"."pole_emploi_since",
                 "users_jobseekerprofile"."unemployed_since",
                 "users_jobseekerprofile"."has_rsa_allocation",
                 "users_jobseekerprofile"."rsa_allocation_since",
                 "users_jobseekerprofile"."ass_allocation_since",
                 "users_jobseekerprofile"."aah_allocation_since",
                 "users_jobseekerprofile"."are_allocation_since",
                 "users_jobseekerprofile"."activity_bonus_since",
                 "users_jobseekerprofile"."cape_freelance",
                 "users_jobseekerprofile"."cesa_freelance",
                 "users_jobseekerprofile"."actor_met_for_business_creation",
                 "users_jobseekerprofile"."mean_monthly_income_before_process",
                 "users_jobseekerprofile"."eiti_contributions",
                 "users_jobseekerprofile"."ase_exit",
                 "users_jobseekerprofile"."isolated_parent",
                 "users_jobseekerprofile"."housing_issue",
                 "users_jobseekerprofile"."refugee",
                 "users_jobseekerprofile"."detention_exit_or_ppsmj",
                 "users_jobseekerprofile"."low_level_in_french",
                 "users_jobseekerprofile"."mobility_issue",
                 "users_jobseekerprofile"."hexa_lane_number",
                 "users_jobseekerprofile"."hexa_std_extension",
                 "users_jobseekerprofile"."hexa_non_std_extension",
                 "users_jobseekerprofile"."hexa_lane_type",
                 "users_jobseekerprofile"."hexa_lane_name",
                 "users_jobseekerprofile"."hexa_additional_address",
                 "users_jobseekerprofile"."hexa_post_code",
                 "users_jobseekerprofile"."hexa_commune_id",
                 "users_jobseekerprofile"."pe_obfuscated_nir",
                 "users_jobseekerprofile"."pe_last_certification_attempt_at",
                 "users_jobseekerprofile"."created_by_prescriber_organization_id",
                 "users_jobseekerprofile"."is_stalled",
                 "users_jobseekerprofile"."is_not_stalled_anymore",
                 "users_jobseekerprofile"."fields_history",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "job_applications_jobapplication"
          INNER JOIN "companies_company" ON ("job_applications_jobapplication"."to_company_id" = "companies_company"."id")
          INNER JOIN "users_user" ON ("job_applications_jobapplication"."job_seeker_id" = "users_user"."id")
          LEFT OUTER JOIN "users_jobseekerprofile" ON ("users_user"."id" = "users_jobseekerprofile"."user_id")
          WHERE (EXISTS
                   (SELECT %s AS "a"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = ("job_applications_jobapplication"."to_company_id")
                           AND U0."user_id" = %s)
                    LIMIT 1)
                 AND "job_applications_jobapplication"."id" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'User.latest_approval[users/models.py]',
          'User.has_valid_approval[users/models.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "approvals_approval"."id",
                 "approvals_approval"."start_at",
                 "approvals_approval"."end_at",
                 "approvals_approval"."created_at",
                 "approvals_approval"."number",
                 "approvals_approval"."pe_notification_status",
                 "approvals_approval"."pe_notification_time",
                 "approvals_approval"."pe_notification_endpoint",
                 "approvals_approval"."pe_notification_exit_code",
                 "approvals_approval"."user_id",
                 "approvals_approval"."created_by_id",
                 "approvals_approval"."origin",
                 "approvals_approval"."eligibility_diagnosis_id",
                 "approvals_approval"."updated_at",
                 "approvals_approval"."origin_siae_siret",
                 "approvals_approval"."origin_siae_kind",
                 "approvals_approval"."origin_sender_kind",
                 "approvals_approval"."origin_prescriber_organization_kind",
                 "approvals_approval"."public_id"
          FROM "approvals_approval"
          WHERE "approvals_approval"."user_id" = %s
          ORDER BY "approvals_approval"."created_at" DESC
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T3."id",
                 T3."password",
                 T3."last_login",
                 T3."is_superuser",
                 T3."username",
                 T3."first_name",
                 T3."last_name",
                 T3."is_staff",
                 T3."is_active",
                 T3."date_joined",
                 T3."address_line_1",
                 T3."address_line_2",
                 T3."post_code",
                 T3."city",
                 T3."department",
                 T3."coords",
                 T3."geocoding_score",
                 T3."geocoding_updated_at",
                 T3."ban_api_resolved_address",
                 T3."insee_city_id",
                 T3."title",
                 T3."full_name_search_vector",
                 T3."email",
                 T3."phone",
                 T3."kind",
                 T3."identity_provider",
                 T3."has_completed_welcoming_tour",
                 T3."created_by_id",
                 T3."external_data_source_history",
                 T3."last_checked_at",
                 T3."public_id",
                 T3."address_filled_at",
                 T3."first_login",
                 T3."upcoming_deletion_notified_at",
                 T3."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          INNER JOIN "users_user" T3 ON ("eligibility_eligibilitydiagnosis"."author_id" = T3."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."author_kind" = %s
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'EligibilityDiagnosisManagerFromEligibilityDiagnosisQuerySet.last_considered_valid[eligibility/models/iae.py]',
          'ConfirmationForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T4."id",
                 T4."password",
                 T4."last_login",
                 T4."is_superuser",
                 T4."username",
                 T4."first_name",
                 T4."last_name",
                 T4."is_staff",
                 T4."is_active",
                 T4."date_joined",
                 T4."address_line_1",
                 T4."address_line_2",
                 T4."post_code",
                 T4."city",
                 T4."department",
                 T4."coords",
                 T4."geocoding_score",
                 T4."geocoding_updated_at",
                 T4."ban_api_resolved_address",
                 T4."insee_city_id",
                 T4."title",
                 T4."full_name_search_vector",
                 T4."email",
                 T4."phone",
                 T4."kind",
                 T4."identity_provider",
                 T4."has_completed_welcoming_tour",
                 T4."created_by_id",
                 T4."external_data_source_history",
                 T4."last_checked_at",
                 T4."public_id",
                 T4."address_filled_at",
                 T4."first_login",
                 T4."upcoming_deletion_notified_at",
                 T4."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          INNER JOIN "users_user" T4 ON ("eligibility_eligibilitydiagnosis"."author_id" = T4."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          WHERE (("eligibility_eligibilitydiagnosis"."author_kind" = %s
                  OR "eligibility_eligibilitydiagnosis"."author_siae_id" = %s)
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_country"."id",
                 "asp_country"."code",
                 "asp_country"."name",
                 "asp_country"."group",
                 "asp_country"."department"
          FROM "asp_country"
          WHERE "asp_country"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'AcceptForm.__init__[www/apply/forms.py]',
          'ConfirmationForAcceptView.get_forms[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "companies_jobdescription"."id",
                 "companies_jobdescription"."appellation_id",
                 "companies_jobdescription"."company_id",
                 "companies_jobdescription"."created_at",
                 "companies_jobdescription"."updated_at",
                 "companies_jobdescription"."is_active",
                 "companies_jobdescription"."last_employer_update_at",
                 "companies_jobdescription"."custom_name",
                 "companies_jobdescription"."description",
                 "companies_jobdescription"."ui_rank",
                 "companies_jobdescription"."contract_type",
                 "companies_jobdescription"."other_contract_type",
                 "companies_jobdescription"."location_id",
                 "companies_jobdescription"."hours_per_week",
                 "companies_jobdescription"."open_positions",
                 "companies_jobdescription"."profile_description",
                 "companies_jobdescription"."is_resume_mandatory",
                 "companies_jobdescription"."is_qpv_mandatory",
                 "companies_jobdescription"."market_context_description",
                 "companies_jobdescription"."source_id",
                 "companies_jobdescription"."source_kind",
                 "companies_jobdescription"."source_url",
                 "companies_jobdescription"."source_tags",
                 "companies_jobdescription"."field_history",
                 "companies_jobdescription"."creation_source",
                 "jobs_appellation"."updated_at",
                 "jobs_appellation"."code",
                 "jobs_appellation"."name",
                 "jobs_appellation"."rome_id",
                 "jobs_appellation"."full_text",
                 "cities_city"."id",
                 "cities_city"."name",
                 "cities_city"."normalized_name",
                 "cities_city"."slug",
                 "cities_city"."department",
                 "cities_city"."post_codes",
                 "cities_city"."code_insee",
                 "cities_city"."coords",
                 "cities_city"."edition_mode",
                 "cities_city"."last_synced_at"
          FROM "companies_jobdescription"
          INNER JOIN "jobs_appellation" ON ("companies_jobdescription"."appellation_id" = "jobs_appellation"."code")
          LEFT OUTER JOIN "cities_city" ON ("companies_jobdescription"."location_id" = "cities_city"."id")
          WHERE "companies_jobdescription"."company_id" = %s
          ORDER BY "companies_jobdescription"."custom_name" ASC,
                   "companies_jobdescription"."is_active" ASC
        ''',
      }),
      dict({
        'origin': list([
          'JobApplication.clean[job_applications/models.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/common.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'JobApplication.eligibility_diagnosis_by_siae_required[job_applications/models.py]',
          'ConfirmationForAcceptView.missing_steps_redirect[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T4."id",
                 T4."password",
                 T4."last_login",
                 T4."is_superuser",
                 T4."username",
                 T4."first_name",
                 T4."last_name",
                 T4."is_staff",
                 T4."is_active",
                 T4."date_joined",
                 T4."address_line_1",
                 T4."address_line_2",
                 T4."post_code",
                 T4."city",
                 T4."department",
                 T4."coords",
                 T4."geocoding_score",
                 T4."geocoding_updated_at",
                 T4."ban_api_resolved_address",
                 T4."insee_city_id",
                 T4."title",
                 T4."full_name_search_vector",
                 T4."email",
                 T4."phone",
                 T4."kind",
                 T4."identity_provider",
                 T4."has_completed_welcoming_tour",
                 T4."created_by_id",
                 T4."external_data_source_history",
                 T4."last_checked_at",
                 T4."public_id",
                 T4."address_filled_at",
                 T4."first_login",
                 T4."upcoming_deletion_notified_at",
                 T4."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          INNER JOIN "users_user" T4 ON ("eligibility_eligibilitydiagnosis"."author_id" = T4."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND ("eligibility_eligibilitydiagnosis"."author_kind" = %s
                      OR "eligibility_eligibilitydiagnosis"."author_siae_id" = %s)
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'JobApplication.eligibility_diagnosis_by_siae_required[job_applications/models.py]',
          'ConfirmationForAcceptView.get_eligibility_view_name[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get_back_url[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get_context_data[www/apply/views/common.py]',
          'ConfirmationForAcceptView.get_context_data[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get_context_data[www/apply/views/accept_views.py]',
          'ConfirmationForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T4."id",
                 T4."password",
                 T4."last_login",
                 T4."is_superuser",
                 T4."username",
                 T4."first_name",
                 T4."last_name",
                 T4."is_staff",
                 T4."is_active",
                 T4."date_joined",
                 T4."address_line_1",
                 T4."address_line_2",
                 T4."post_code",
                 T4."city",
                 T4."department",
                 T4."coords",
                 T4."geocoding_score",
                 T4."geocoding_updated_at",
                 T4."ban_api_resolved_address",
                 T4."insee_city_id",
                 T4."title",
                 T4."full_name_search_vector",
                 T4."email",
                 T4."phone",
                 T4."kind",
                 T4."identity_provider",
                 T4."has_completed_welcoming_tour",
                 T4."created_by_id",
                 T4."external_data_source_history",
                 T4."last_checked_at",
                 T4."public_id",
                 T4."address_filled_at",
                 T4."first_login",
                 T4."upcoming_deletion_notified_at",
                 T4."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          INNER JOIN "users_user" T4 ON ("eligibility_eligibilitydiagnosis"."author_id" = T4."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND ("eligibility_eligibilitydiagnosis"."author_kind" = %s
                      OR "eligibility_eligibilitydiagnosis"."author_siae_id" = %s)
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Company.has_job_descriptions_not_updated_recently[companies/models.py]',
          'IfNode[layout/base.html]',
          'BlockNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_confirmation_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "companies_jobdescription"
          WHERE ("companies_jobdescription"."company_id" = %s
                 AND "companies_jobdescription"."is_active"
                 AND "companies_jobdescription"."last_employer_update_at" < %s)
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Company.has_admin[common_apps/organizations/models.py]',
          'Company.convention_can_be_accessed_by[companies/models.py]',
          'nav[utils/templatetags/nav.py]',
          'InclusionNode[layout/_header_authenticated.html]',
          'IncludeNode[layout/base.html]',
          'IfNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_confirmation_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "users_user"
          INNER JOIN "companies_companymembership" ON ("users_user"."id" = "companies_companymembership"."user_id")
          WHERE ("companies_companymembership"."id" IN
                   (SELECT U0."id"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = %s
                           AND U0."is_admin"
                           AND U1."is_active"))
                 AND "users_user"."id" = %s)
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Session.save[<site-packages>/django/db/models/base.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          UPDATE "django_session"
          SET "session_data" = %s,
              "expire_date" = %s
          WHERE "django_session"."session_key" = %s
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
          'SessionStore.save[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
    ]),
  })
# ---
# name: TestFillJobSeekerInfosForAccept.test_no_missing_data_iae[view queries]
  dict({
    'num_queries': 14,
    'queries': list([
      dict({
        'origin': list([
          'SessionStore._get_session_from_db[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          SELECT "django_session"."session_key",
                 "django_session"."session_data",
                 "django_session"."expire_date"
          FROM "django_session"
          WHERE ("django_session"."expire_date" > %s
                 AND "django_session"."session_key" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_companymembership"."id",
                 "companies_companymembership"."user_id",
                 "companies_companymembership"."joined_at",
                 "companies_companymembership"."is_admin",
                 "companies_companymembership"."is_active",
                 "companies_companymembership"."created_at",
                 "companies_companymembership"."updated_at",
                 "companies_companymembership"."company_id",
                 "companies_companymembership"."updated_by_id"
          FROM "companies_companymembership"
          WHERE ("companies_companymembership"."is_active"
                 AND "companies_companymembership"."user_id" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 EXISTS
            (SELECT %s AS "a"
             FROM "companies_siaeconvention" U0
             WHERE (U0."deactivated_at" >= %s
                    AND U0."id" = ("companies_company"."convention_id"))
             LIMIT 1) AS "has_convention_in_grace_period",
                 "companies_siaeconvention"."id",
                 "companies_siaeconvention"."kind",
                 "companies_siaeconvention"."siret_signature",
                 "companies_siaeconvention"."is_active",
                 "companies_siaeconvention"."deactivated_at",
                 "companies_siaeconvention"."reactivated_by_id",
                 "companies_siaeconvention"."reactivated_at",
                 "companies_siaeconvention"."asp_id",
                 "companies_siaeconvention"."created_at",
                 "companies_siaeconvention"."updated_at"
          FROM "companies_company"
          INNER JOIN "companies_companymembership" ON ("companies_company"."id" = "companies_companymembership"."company_id")
          LEFT OUTER JOIN "companies_siaeconvention" ON ("companies_company"."convention_id" = "companies_siaeconvention"."id")
          WHERE (NOT ("companies_company"."siret" = %s)
                 AND "companies_companymembership"."user_id" = %s
                 AND "companies_company"."id" IN (%s)
                 AND ("companies_company"."kind" IN (%s,
                                                     %s,
                                                     %s,
                                                     %s)
                      OR ("companies_company"."is_searchable"
                          AND "companies_company"."kind" = %s)
                      OR "companies_company"."source" = %s
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."id" = ("companies_company"."convention_id")
                                AND U0."is_active")
                         LIMIT 1)
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."deactivated_at" >= %s
                                AND U0."id" = ("companies_company"."convention_id"))
                         LIMIT 1)))
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_nexususer"."id",
                 "nexus_nexususer"."source",
                 "nexus_nexususer"."source_id",
                 "nexus_nexususer"."source_kind",
                 "nexus_nexususer"."first_name",
                 "nexus_nexususer"."last_name",
                 "nexus_nexususer"."email",
                 "nexus_nexususer"."phone",
                 "nexus_nexususer"."last_login",
                 "nexus_nexususer"."auth",
                 "nexus_nexususer"."kind",
                 "nexus_nexususer"."updated_at",
                 COALESCE(
                            (SELECT U0."valid_since" AS "valid_since"
                             FROM "nexus_nexusressourcesyncstatus" U0
                             WHERE U0."service" = ("nexus_nexususer"."source")
                             ORDER BY RANDOM() ASC
                             LIMIT 1), %s) AS "_threshold"
          FROM "nexus_nexususer"
          WHERE ("nexus_nexususer"."updated_at" >= (COALESCE(
                                                               (SELECT U0."valid_since" AS "valid_since"
                                                                FROM "nexus_nexusressourcesyncstatus" U0
                                                                WHERE U0."service" = ("nexus_nexususer"."source")
                                                                ORDER BY RANDOM() ASC
                                                                LIMIT 1), %s))
                 AND "nexus_nexususer"."email" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_activatedservice"."id",
                 "nexus_activatedservice"."user_id",
                 "nexus_activatedservice"."service",
                 "nexus_activatedservice"."created_at"
          FROM "nexus_activatedservice"
          WHERE "nexus_activatedservice"."user_id" = %s
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          (
             (SELECT %s AS "a"
              FROM "companies_companymembership"
              INNER JOIN "users_user" ON ("companies_companymembership"."user_id" = "users_user"."id")
              INNER JOIN "companies_company" ON ("companies_companymembership"."company_id" = "companies_company"."id")
              WHERE ("users_user"."is_active"
                     AND "companies_companymembership"."is_active"
                     AND "companies_company"."department" IN (%s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s)
                     AND "users_user"."email" = %s))
           UNION
             (SELECT %s AS "a"
              FROM "prescribers_prescribermembership"
              INNER JOIN "users_user" ON ("prescribers_prescribermembership"."user_id" = "users_user"."id")
              INNER JOIN "prescribers_prescriberorganization" ON ("prescribers_prescribermembership"."organization_id" = "prescribers_prescriberorganization"."id")
              WHERE ("users_user"."is_active"
                     AND "prescribers_prescribermembership"."is_active"
                     AND "prescribers_prescriberorganization"."department" IN (%s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s)
                     AND "users_user"."email" = %s)))
          UNION
            (SELECT %s AS "a"
             FROM "nexus_nexusmembership"
             INNER JOIN "nexus_nexusstructure" ON ("nexus_nexusmembership"."structure_id" = "nexus_nexusstructure"."id")
             INNER JOIN "nexus_nexususer" ON ("nexus_nexusmembership"."user_id" = "nexus_nexususer"."id")
             WHERE ("nexus_nexusmembership"."updated_at" >= (COALESCE(
                                                                        (SELECT U0."valid_since" AS "valid_since"
                                                                         FROM "nexus_nexusressourcesyncstatus" U0
                                                                         WHERE U0."service" = ("nexus_nexusmembership"."source")
                                                                         ORDER BY RANDOM() ASC
                                                                         LIMIT 1), %s))
                    AND "nexus_nexusstructure"."department" IN (%s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s)
                    AND "nexus_nexususer"."email" = %s))
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'FillJobSeekerInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "job_applications_jobapplication"."id",
                 "job_applications_jobapplication"."job_seeker_id",
                 "job_applications_jobapplication"."eligibility_diagnosis_id",
                 "job_applications_jobapplication"."geiq_eligibility_diagnosis_id",
                 "job_applications_jobapplication"."create_employee_record",
                 "job_applications_jobapplication"."resume_id",
                 "job_applications_jobapplication"."sender_id",
                 "job_applications_jobapplication"."sender_kind",
                 "job_applications_jobapplication"."sender_company_id",
                 "job_applications_jobapplication"."sender_prescriber_organization_id",
                 "job_applications_jobapplication"."to_company_id",
                 "job_applications_jobapplication"."state",
                 "job_applications_jobapplication"."archived_at",
                 "job_applications_jobapplication"."archived_by_id",
                 "job_applications_jobapplication"."hired_job_id",
                 "job_applications_jobapplication"."message",
                 "job_applications_jobapplication"."answer",
                 "job_applications_jobapplication"."answer_to_prescriber",
                 "job_applications_jobapplication"."refusal_reason",
                 "job_applications_jobapplication"."refusal_reason_shared_with_job_seeker",
                 "job_applications_jobapplication"."hiring_start_at",
                 "job_applications_jobapplication"."hiring_end_at",
                 "job_applications_jobapplication"."origin",
                 "job_applications_jobapplication"."approval_id",
                 "job_applications_jobapplication"."approval_delivery_mode",
                 "job_applications_jobapplication"."approval_number_sent_by_email",
                 "job_applications_jobapplication"."approval_number_sent_at",
                 "job_applications_jobapplication"."approval_manually_delivered_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_at",
                 "job_applications_jobapplication"."transferred_at",
                 "job_applications_jobapplication"."transferred_by_id",
                 "job_applications_jobapplication"."transferred_from_id",
                 "job_applications_jobapplication"."created_at",
                 "job_applications_jobapplication"."updated_at",
                 "job_applications_jobapplication"."processed_at",
                 "job_applications_jobapplication"."prehiring_guidance_days",
                 "job_applications_jobapplication"."contract_type",
                 "job_applications_jobapplication"."nb_hours_per_week",
                 "job_applications_jobapplication"."contract_type_details",
                 "job_applications_jobapplication"."qualification_type",
                 "job_applications_jobapplication"."qualification_level",
                 "job_applications_jobapplication"."planned_training_hours",
                 "job_applications_jobapplication"."inverted_vae_contract",
                 "job_applications_jobapplication"."diagoriente_invite_sent_at",
                 "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update",
                 "users_jobseekerprofile"."user_id",
                 "users_jobseekerprofile"."birthdate",
                 "users_jobseekerprofile"."birth_place_id",
                 "users_jobseekerprofile"."birth_country_id",
                 "users_jobseekerprofile"."nir",
                 "users_jobseekerprofile"."lack_of_nir_reason",
                 "users_jobseekerprofile"."pole_emploi_id",
                 "users_jobseekerprofile"."lack_of_pole_emploi_id_reason",
                 "users_jobseekerprofile"."ft_gps_id",
                 "users_jobseekerprofile"."asp_uid",
                 "users_jobseekerprofile"."education_level",
                 "users_jobseekerprofile"."resourceless",
                 "users_jobseekerprofile"."rqth_employee",
                 "users_jobseekerprofile"."oeth_employee",
                 "users_jobseekerprofile"."pole_emploi_since",
                 "users_jobseekerprofile"."unemployed_since",
                 "users_jobseekerprofile"."has_rsa_allocation",
                 "users_jobseekerprofile"."rsa_allocation_since",
                 "users_jobseekerprofile"."ass_allocation_since",
                 "users_jobseekerprofile"."aah_allocation_since",
                 "users_jobseekerprofile"."are_allocation_since",
                 "users_jobseekerprofile"."activity_bonus_since",
                 "users_jobseekerprofile"."cape_freelance",
                 "users_jobseekerprofile"."cesa_freelance",
                 "users_jobseekerprofile"."actor_met_for_business_creation",
                 "users_jobseekerprofile"."mean_monthly_income_before_process",
                 "users_jobseekerprofile"."eiti_contributions",
                 "users_jobseekerprofile"."ase_exit",
                 "users_jobseekerprofile"."isolated_parent",
                 "users_jobseekerprofile"."housing_issue",
                 "users_jobseekerprofile"."refugee",
                 "users_jobseekerprofile"."detention_exit_or_ppsmj",
                 "users_jobseekerprofile"."low_level_in_french",
                 "users_jobseekerprofile"."mobility_issue",
                 "users_jobseekerprofile"."hexa_lane_number",
                 "users_jobseekerprofile"."hexa_std_extension",
                 "users_jobseekerprofile"."hexa_non_std_extension",
                 "users_jobseekerprofile"."hexa_lane_type",
                 "users_jobseekerprofile"."hexa_lane_name",
                 "users_jobseekerprofile"."hexa_additional_address",
                 "users_jobseekerprofile"."hexa_post_code",
                 "users_jobseekerprofile"."hexa_commune_id",
                 "users_jobseekerprofile"."pe_obfuscated_nir",
                 "users_jobseekerprofile"."pe_last_certification_attempt_at",
                 "users_jobseekerprofile"."created_by_prescriber_organization_id",
                 "users_jobseekerprofile"."is_stalled",
                 "users_jobseekerprofile"."is_not_stalled_anymore",
                 "users_jobseekerprofile"."fields_history",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "job_applications_jobapplication"
          INNER JOIN "companies_company" ON ("job_applications_jobapplication"."to_company_id" = "companies_company"."id")
          INNER JOIN "users_user" ON ("job_applications_jobapplication"."job_seeker_id" = "users_user"."id")
          LEFT OUTER JOIN "users_jobseekerprofile" ON ("users_user"."id" = "users_jobseekerprofile"."user_id")
          WHERE (EXISTS
                   (SELECT %s AS "a"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = ("job_applications_jobapplication"."to_company_id")
                           AND U0."user_id" = %s)
                    LIMIT 1)
                 AND "job_applications_jobapplication"."id" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'User.latest_approval[users/models.py]',
          'User.has_valid_approval[users/models.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'FillJobSeekerInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "approvals_approval"."id",
                 "approvals_approval"."start_at",
                 "approvals_approval"."end_at",
                 "approvals_approval"."created_at",
                 "approvals_approval"."number",
                 "approvals_approval"."pe_notification_status",
                 "approvals_approval"."pe_notification_time",
                 "approvals_approval"."pe_notification_endpoint",
                 "approvals_approval"."pe_notification_exit_code",
                 "approvals_approval"."user_id",
                 "approvals_approval"."created_by_id",
                 "approvals_approval"."origin",
                 "approvals_approval"."eligibility_diagnosis_id",
                 "approvals_approval"."updated_at",
                 "approvals_approval"."origin_siae_siret",
                 "approvals_approval"."origin_siae_kind",
                 "approvals_approval"."origin_sender_kind",
                 "approvals_approval"."origin_prescriber_organization_kind",
                 "approvals_approval"."public_id"
          FROM "approvals_approval"
          WHERE "approvals_approval"."user_id" = %s
          ORDER BY "approvals_approval"."created_at" DESC
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'FillJobSeekerInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T3."id",
                 T3."password",
                 T3."last_login",
                 T3."is_superuser",
                 T3."username",
                 T3."first_name",
                 T3."last_name",
                 T3."is_staff",
                 T3."is_active",
                 T3."date_joined",
                 T3."address_line_1",
                 T3."address_line_2",
                 T3."post_code",
                 T3."city",
                 T3."department",
                 T3."coords",
                 T3."geocoding_score",
                 T3."geocoding_updated_at",
                 T3."ban_api_resolved_address",
                 T3."insee_city_id",
                 T3."title",
                 T3."full_name_search_vector",
                 T3."email",
                 T3."phone",
                 T3."kind",
                 T3."identity_provider",
                 T3."has_completed_welcoming_tour",
                 T3."created_by_id",
                 T3."external_data_source_history",
                 T3."last_checked_at",
                 T3."public_id",
                 T3."address_filled_at",
                 T3."first_login",
                 T3."upcoming_deletion_notified_at",
                 T3."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          INNER JOIN "users_user" T3 ON ("eligibility_eligibilitydiagnosis"."author_id" = T3."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."author_kind" = %s
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'EligibilityDiagnosisManagerFromEligibilityDiagnosisQuerySet.last_considered_valid[eligibility/models/iae.py]',
          'FillJobSeekerInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T4."id",
                 T4."password",
                 T4."last_login",
                 T4."is_superuser",
                 T4."username",
                 T4."first_name",
                 T4."last_name",
                 T4."is_staff",
                 T4."is_active",
                 T4."date_joined",
                 T4."address_line_1",
                 T4."address_line_2",
                 T4."post_code",
                 T4."city",
                 T4."department",
                 T4."coords",
                 T4."geocoding_score",
                 T4."geocoding_updated_at",
                 T4."ban_api_resolved_address",
                 T4."insee_city_id",
                 T4."title",
                 T4."full_name_search_vector",
                 T4."email",
                 T4."phone",
                 T4."kind",
                 T4."identity_provider",
                 T4."has_completed_welcoming_tour",
                 T4."created_by_id",
                 T4."external_data_source_history",
                 T4."last_checked_at",
                 T4."public_id",
                 T4."address_filled_at",
                 T4."first_login",
                 T4."upcoming_deletion_notified_at",
                 T4."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          INNER JOIN "users_user" T4 ON ("eligibility_eligibilitydiagnosis"."author_id" = T4."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          WHERE (("eligibility_eligibilitydiagnosis"."author_kind" = %s
                  OR "eligibility_eligibilitydiagnosis"."author_siae_id" = %s)
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'FillJobSeekerInfosForAcceptView.get_forms[www/apply/views/common.py]',
          'FillJobSeekerInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_country"."id",
                 "asp_country"."code",
                 "asp_country"."name",
                 "asp_country"."group",
                 "asp_country"."department"
          FROM "asp_country"
          WHERE "asp_country"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
    ]),
  })
# ---
# name: TestProcessAcceptViewsInWizard.test_select_job_description_for_job_application[accept view SQL queries]
  dict({
    'num_queries': 24,
    'queries': list([
      dict({
        'origin': list([
          'SessionStore._get_session_from_db[<site-packages>/django/contrib/sessions/backends/db.py]',
        ]),
        'sql': '''
          SELECT "django_session"."session_key",
                 "django_session"."session_data",
                 "django_session"."expire_date"
          FROM "django_session"
          WHERE ("django_session"."expire_date" > %s
                 AND "django_session"."session_key" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update"
          FROM "users_user"
          WHERE "users_user"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_companymembership"."id",
                 "companies_companymembership"."user_id",
                 "companies_companymembership"."joined_at",
                 "companies_companymembership"."is_admin",
                 "companies_companymembership"."is_active",
                 "companies_companymembership"."created_at",
                 "companies_companymembership"."updated_at",
                 "companies_companymembership"."company_id",
                 "companies_companymembership"."updated_by_id"
          FROM "companies_companymembership"
          WHERE ("companies_companymembership"."is_active"
                 AND "companies_companymembership"."user_id" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'ItouCurrentOrganizationMiddleware.__call__[utils/perms/middleware.py]',
        ]),
        'sql': '''
          SELECT "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 EXISTS
            (SELECT %s AS "a"
             FROM "companies_siaeconvention" U0
             WHERE (U0."deactivated_at" >= %s
                    AND U0."id" = ("companies_company"."convention_id"))
             LIMIT 1) AS "has_convention_in_grace_period",
                 "companies_siaeconvention"."id",
                 "companies_siaeconvention"."kind",
                 "companies_siaeconvention"."siret_signature",
                 "companies_siaeconvention"."is_active",
                 "companies_siaeconvention"."deactivated_at",
                 "companies_siaeconvention"."reactivated_by_id",
                 "companies_siaeconvention"."reactivated_at",
                 "companies_siaeconvention"."asp_id",
                 "companies_siaeconvention"."created_at",
                 "companies_siaeconvention"."updated_at"
          FROM "companies_company"
          INNER JOIN "companies_companymembership" ON ("companies_company"."id" = "companies_companymembership"."company_id")
          LEFT OUTER JOIN "companies_siaeconvention" ON ("companies_company"."convention_id" = "companies_siaeconvention"."id")
          WHERE (NOT ("companies_company"."siret" = %s)
                 AND "companies_companymembership"."user_id" = %s
                 AND "companies_company"."id" IN (%s)
                 AND ("companies_company"."kind" IN (%s,
                                                     %s,
                                                     %s,
                                                     %s)
                      OR ("companies_company"."is_searchable"
                          AND "companies_company"."kind" = %s)
                      OR "companies_company"."source" = %s
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."id" = ("companies_company"."convention_id")
                                AND U0."is_active")
                         LIMIT 1)
                      OR EXISTS
                        (SELECT %s AS "a"
                         FROM "companies_siaeconvention" U0
                         WHERE (U0."deactivated_at" >= %s
                                AND U0."id" = ("companies_company"."convention_id"))
                         LIMIT 1)))
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_nexususer"."id",
                 "nexus_nexususer"."source",
                 "nexus_nexususer"."source_id",
                 "nexus_nexususer"."source_kind",
                 "nexus_nexususer"."first_name",
                 "nexus_nexususer"."last_name",
                 "nexus_nexususer"."email",
                 "nexus_nexususer"."phone",
                 "nexus_nexususer"."last_login",
                 "nexus_nexususer"."auth",
                 "nexus_nexususer"."kind",
                 "nexus_nexususer"."updated_at",
                 COALESCE(
                            (SELECT U0."valid_since" AS "valid_since"
                             FROM "nexus_nexusressourcesyncstatus" U0
                             WHERE U0."service" = ("nexus_nexususer"."source")
                             ORDER BY RANDOM() ASC
                             LIMIT 1), %s) AS "_threshold"
          FROM "nexus_nexususer"
          WHERE ("nexus_nexususer"."updated_at" >= (COALESCE(
                                                               (SELECT U0."valid_since" AS "valid_since"
                                                                FROM "nexus_nexusressourcesyncstatus" U0
                                                                WHERE U0."service" = ("nexus_nexususer"."source")
                                                                ORDER BY RANDOM() ASC
                                                                LIMIT 1), %s))
                 AND "nexus_nexususer"."email" = %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'get_service_users[nexus/utils.py]',
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          SELECT "nexus_activatedservice"."id",
                 "nexus_activatedservice"."user_id",
                 "nexus_activatedservice"."service",
                 "nexus_activatedservice"."created_at"
          FROM "nexus_activatedservice"
          WHERE "nexus_activatedservice"."user_id" = %s
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'dropdown_status[nexus/utils.py]',
          'DropDownMiddleware.__call__[nexus/middleware.py]',
        ]),
        'sql': '''
          (
             (SELECT %s AS "a"
              FROM "companies_companymembership"
              INNER JOIN "users_user" ON ("companies_companymembership"."user_id" = "users_user"."id")
              INNER JOIN "companies_company" ON ("companies_companymembership"."company_id" = "companies_company"."id")
              WHERE ("users_user"."is_active"
                     AND "companies_companymembership"."is_active"
                     AND "companies_company"."department" IN (%s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s,
                                                              %s)
                     AND "users_user"."email" = %s))
           UNION
             (SELECT %s AS "a"
              FROM "prescribers_prescribermembership"
              INNER JOIN "users_user" ON ("prescribers_prescribermembership"."user_id" = "users_user"."id")
              INNER JOIN "prescribers_prescriberorganization" ON ("prescribers_prescribermembership"."organization_id" = "prescribers_prescriberorganization"."id")
              WHERE ("users_user"."is_active"
                     AND "prescribers_prescribermembership"."is_active"
                     AND "prescribers_prescriberorganization"."department" IN (%s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s,
                                                                               %s)
                     AND "users_user"."email" = %s)))
          UNION
            (SELECT %s AS "a"
             FROM "nexus_nexusmembership"
             INNER JOIN "nexus_nexusstructure" ON ("nexus_nexusmembership"."structure_id" = "nexus_nexusstructure"."id")
             INNER JOIN "nexus_nexususer" ON ("nexus_nexusmembership"."user_id" = "nexus_nexususer"."id")
             WHERE ("nexus_nexusmembership"."updated_at" >= (COALESCE(
                                                                        (SELECT U0."valid_since" AS "valid_since"
                                                                         FROM "nexus_nexusressourcesyncstatus" U0
                                                                         WHERE U0."service" = ("nexus_nexusmembership"."source")
                                                                         ORDER BY RANDOM() ASC
                                                                         LIMIT 1), %s))
                    AND "nexus_nexusstructure"."department" IN (%s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s,
                                                                %s)
                    AND "nexus_nexususer"."email" = %s))
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "job_applications_jobapplication"."id",
                 "job_applications_jobapplication"."job_seeker_id",
                 "job_applications_jobapplication"."eligibility_diagnosis_id",
                 "job_applications_jobapplication"."geiq_eligibility_diagnosis_id",
                 "job_applications_jobapplication"."create_employee_record",
                 "job_applications_jobapplication"."resume_id",
                 "job_applications_jobapplication"."sender_id",
                 "job_applications_jobapplication"."sender_kind",
                 "job_applications_jobapplication"."sender_company_id",
                 "job_applications_jobapplication"."sender_prescriber_organization_id",
                 "job_applications_jobapplication"."to_company_id",
                 "job_applications_jobapplication"."state",
                 "job_applications_jobapplication"."archived_at",
                 "job_applications_jobapplication"."archived_by_id",
                 "job_applications_jobapplication"."hired_job_id",
                 "job_applications_jobapplication"."message",
                 "job_applications_jobapplication"."answer",
                 "job_applications_jobapplication"."answer_to_prescriber",
                 "job_applications_jobapplication"."refusal_reason",
                 "job_applications_jobapplication"."refusal_reason_shared_with_job_seeker",
                 "job_applications_jobapplication"."hiring_start_at",
                 "job_applications_jobapplication"."hiring_end_at",
                 "job_applications_jobapplication"."origin",
                 "job_applications_jobapplication"."approval_id",
                 "job_applications_jobapplication"."approval_delivery_mode",
                 "job_applications_jobapplication"."approval_number_sent_by_email",
                 "job_applications_jobapplication"."approval_number_sent_at",
                 "job_applications_jobapplication"."approval_manually_delivered_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_by_id",
                 "job_applications_jobapplication"."approval_manually_refused_at",
                 "job_applications_jobapplication"."transferred_at",
                 "job_applications_jobapplication"."transferred_by_id",
                 "job_applications_jobapplication"."transferred_from_id",
                 "job_applications_jobapplication"."created_at",
                 "job_applications_jobapplication"."updated_at",
                 "job_applications_jobapplication"."processed_at",
                 "job_applications_jobapplication"."prehiring_guidance_days",
                 "job_applications_jobapplication"."contract_type",
                 "job_applications_jobapplication"."nb_hours_per_week",
                 "job_applications_jobapplication"."contract_type_details",
                 "job_applications_jobapplication"."qualification_type",
                 "job_applications_jobapplication"."qualification_level",
                 "job_applications_jobapplication"."planned_training_hours",
                 "job_applications_jobapplication"."inverted_vae_contract",
                 "job_applications_jobapplication"."diagoriente_invite_sent_at",
                 "users_user"."id",
                 "users_user"."password",
                 "users_user"."last_login",
                 "users_user"."is_superuser",
                 "users_user"."username",
                 "users_user"."first_name",
                 "users_user"."last_name",
                 "users_user"."is_staff",
                 "users_user"."is_active",
                 "users_user"."date_joined",
                 "users_user"."address_line_1",
                 "users_user"."address_line_2",
                 "users_user"."post_code",
                 "users_user"."city",
                 "users_user"."department",
                 "users_user"."coords",
                 "users_user"."geocoding_score",
                 "users_user"."geocoding_updated_at",
                 "users_user"."ban_api_resolved_address",
                 "users_user"."insee_city_id",
                 "users_user"."title",
                 "users_user"."full_name_search_vector",
                 "users_user"."email",
                 "users_user"."phone",
                 "users_user"."kind",
                 "users_user"."identity_provider",
                 "users_user"."has_completed_welcoming_tour",
                 "users_user"."created_by_id",
                 "users_user"."external_data_source_history",
                 "users_user"."last_checked_at",
                 "users_user"."public_id",
                 "users_user"."address_filled_at",
                 "users_user"."first_login",
                 "users_user"."upcoming_deletion_notified_at",
                 "users_user"."allow_next_sso_sub_update",
                 "users_jobseekerprofile"."user_id",
                 "users_jobseekerprofile"."birthdate",
                 "users_jobseekerprofile"."birth_place_id",
                 "users_jobseekerprofile"."birth_country_id",
                 "users_jobseekerprofile"."nir",
                 "users_jobseekerprofile"."lack_of_nir_reason",
                 "users_jobseekerprofile"."pole_emploi_id",
                 "users_jobseekerprofile"."lack_of_pole_emploi_id_reason",
                 "users_jobseekerprofile"."ft_gps_id",
                 "users_jobseekerprofile"."asp_uid",
                 "users_jobseekerprofile"."education_level",
                 "users_jobseekerprofile"."resourceless",
                 "users_jobseekerprofile"."rqth_employee",
                 "users_jobseekerprofile"."oeth_employee",
                 "users_jobseekerprofile"."pole_emploi_since",
                 "users_jobseekerprofile"."unemployed_since",
                 "users_jobseekerprofile"."has_rsa_allocation",
                 "users_jobseekerprofile"."rsa_allocation_since",
                 "users_jobseekerprofile"."ass_allocation_since",
                 "users_jobseekerprofile"."aah_allocation_since",
                 "users_jobseekerprofile"."are_allocation_since",
                 "users_jobseekerprofile"."activity_bonus_since",
                 "users_jobseekerprofile"."cape_freelance",
                 "users_jobseekerprofile"."cesa_freelance",
                 "users_jobseekerprofile"."actor_met_for_business_creation",
                 "users_jobseekerprofile"."mean_monthly_income_before_process",
                 "users_jobseekerprofile"."eiti_contributions",
                 "users_jobseekerprofile"."ase_exit",
                 "users_jobseekerprofile"."isolated_parent",
                 "users_jobseekerprofile"."housing_issue",
                 "users_jobseekerprofile"."refugee",
                 "users_jobseekerprofile"."detention_exit_or_ppsmj",
                 "users_jobseekerprofile"."low_level_in_french",
                 "users_jobseekerprofile"."mobility_issue",
                 "users_jobseekerprofile"."hexa_lane_number",
                 "users_jobseekerprofile"."hexa_std_extension",
                 "users_jobseekerprofile"."hexa_non_std_extension",
                 "users_jobseekerprofile"."hexa_lane_type",
                 "users_jobseekerprofile"."hexa_lane_name",
                 "users_jobseekerprofile"."hexa_additional_address",
                 "users_jobseekerprofile"."hexa_post_code",
                 "users_jobseekerprofile"."hexa_commune_id",
                 "users_jobseekerprofile"."pe_obfuscated_nir",
                 "users_jobseekerprofile"."pe_last_certification_attempt_at",
                 "users_jobseekerprofile"."created_by_prescriber_organization_id",
                 "users_jobseekerprofile"."is_stalled",
                 "users_jobseekerprofile"."is_not_stalled_anymore",
                 "users_jobseekerprofile"."fields_history",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "job_applications_jobapplication"
          INNER JOIN "companies_company" ON ("job_applications_jobapplication"."to_company_id" = "companies_company"."id")
          INNER JOIN "users_user" ON ("job_applications_jobapplication"."job_seeker_id" = "users_user"."id")
          LEFT OUTER JOIN "users_jobseekerprofile" ON ("users_user"."id" = "users_jobseekerprofile"."user_id")
          WHERE (EXISTS
                   (SELECT %s AS "a"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = ("job_applications_jobapplication"."to_company_id")
                           AND U0."user_id" = %s)
                    LIMIT 1)
                 AND "job_applications_jobapplication"."id" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'User.latest_approval[users/models.py]',
          'User.has_valid_approval[users/models.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "approvals_approval"."id",
                 "approvals_approval"."start_at",
                 "approvals_approval"."end_at",
                 "approvals_approval"."created_at",
                 "approvals_approval"."number",
                 "approvals_approval"."pe_notification_status",
                 "approvals_approval"."pe_notification_time",
                 "approvals_approval"."pe_notification_endpoint",
                 "approvals_approval"."pe_notification_exit_code",
                 "approvals_approval"."user_id",
                 "approvals_approval"."created_by_id",
                 "approvals_approval"."origin",
                 "approvals_approval"."eligibility_diagnosis_id",
                 "approvals_approval"."updated_at",
                 "approvals_approval"."origin_siae_siret",
                 "approvals_approval"."origin_siae_kind",
                 "approvals_approval"."origin_sender_kind",
                 "approvals_approval"."origin_prescriber_organization_kind",
                 "approvals_approval"."public_id"
          FROM "approvals_approval"
          WHERE "approvals_approval"."user_id" = %s
          ORDER BY "approvals_approval"."created_at" DESC
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'RelatedManager.last_considered_valid[eligibility/models/iae.py]',
          'RelatedManager.has_considered_valid[eligibility/models/iae.py]',
          'User.has_valid_diagnosis[users/models.py]',
          'User.new_approval_blocked_by_waiting_period[users/models.py]',
          'check_waiting_period[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T3."id",
                 T3."password",
                 T3."last_login",
                 T3."is_superuser",
                 T3."username",
                 T3."first_name",
                 T3."last_name",
                 T3."is_staff",
                 T3."is_active",
                 T3."date_joined",
                 T3."address_line_1",
                 T3."address_line_2",
                 T3."post_code",
                 T3."city",
                 T3."department",
                 T3."coords",
                 T3."geocoding_score",
                 T3."geocoding_updated_at",
                 T3."ban_api_resolved_address",
                 T3."insee_city_id",
                 T3."title",
                 T3."full_name_search_vector",
                 T3."email",
                 T3."phone",
                 T3."kind",
                 T3."identity_provider",
                 T3."has_completed_welcoming_tour",
                 T3."created_by_id",
                 T3."external_data_source_history",
                 T3."last_checked_at",
                 T3."public_id",
                 T3."address_filled_at",
                 T3."first_login",
                 T3."upcoming_deletion_notified_at",
                 T3."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          INNER JOIN "users_user" T3 ON ("eligibility_eligibilitydiagnosis"."author_id" = T3."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          WHERE ("eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."author_kind" = %s
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'EligibilityDiagnosisQuerySet.first[<site-packages>/django/db/models/query.py]',
          'EligibilityDiagnosisManagerFromEligibilityDiagnosisQuerySet.last_considered_valid[eligibility/models/iae.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
          'ContractInfosForAcceptView.setup[www/apply/views/accept_views.py]',
        ]),
        'sql': '''
          SELECT "eligibility_eligibilitydiagnosis"."id",
                 "eligibility_eligibilitydiagnosis"."author_id",
                 "eligibility_eligibilitydiagnosis"."author_kind",
                 "eligibility_eligibilitydiagnosis"."author_prescriber_organization_id",
                 "eligibility_eligibilitydiagnosis"."created_at",
                 "eligibility_eligibilitydiagnosis"."updated_at",
                 "eligibility_eligibilitydiagnosis"."expires_at",
                 "eligibility_eligibilitydiagnosis"."job_seeker_id",
                 "eligibility_eligibilitydiagnosis"."author_siae_id",
                 CASE
                     WHEN "eligibility_eligibilitydiagnosis"."author_kind" = %s THEN %s
                     ELSE %s
                 END AS "from_prescriber",
                 T4."id",
                 T4."password",
                 T4."last_login",
                 T4."is_superuser",
                 T4."username",
                 T4."first_name",
                 T4."last_name",
                 T4."is_staff",
                 T4."is_active",
                 T4."date_joined",
                 T4."address_line_1",
                 T4."address_line_2",
                 T4."post_code",
                 T4."city",
                 T4."department",
                 T4."coords",
                 T4."geocoding_score",
                 T4."geocoding_updated_at",
                 T4."ban_api_resolved_address",
                 T4."insee_city_id",
                 T4."title",
                 T4."full_name_search_vector",
                 T4."email",
                 T4."phone",
                 T4."kind",
                 T4."identity_provider",
                 T4."has_completed_welcoming_tour",
                 T4."created_by_id",
                 T4."external_data_source_history",
                 T4."last_checked_at",
                 T4."public_id",
                 T4."address_filled_at",
                 T4."first_login",
                 T4."upcoming_deletion_notified_at",
                 T4."allow_next_sso_sub_update",
                 "prescribers_prescriberorganization"."id",
                 "prescribers_prescriberorganization"."address_line_1",
                 "prescribers_prescriberorganization"."address_line_2",
                 "prescribers_prescriberorganization"."post_code",
                 "prescribers_prescriberorganization"."city",
                 "prescribers_prescriberorganization"."department",
                 "prescribers_prescriberorganization"."coords",
                 "prescribers_prescriberorganization"."geocoding_score",
                 "prescribers_prescriberorganization"."geocoding_updated_at",
                 "prescribers_prescriberorganization"."ban_api_resolved_address",
                 "prescribers_prescriberorganization"."insee_city_id",
                 "prescribers_prescriberorganization"."name",
                 "prescribers_prescriberorganization"."created_at",
                 "prescribers_prescriberorganization"."updated_at",
                 "prescribers_prescriberorganization"."uid",
                 "prescribers_prescriberorganization"."active_members_email_reminder_last_sent_at",
                 "prescribers_prescriberorganization"."automatic_geocoding_update",
                 "prescribers_prescriberorganization"."siret",
                 "prescribers_prescriberorganization"."kind",
                 "prescribers_prescriberorganization"."is_brsa",
                 "prescribers_prescriberorganization"."phone",
                 "prescribers_prescriberorganization"."email",
                 "prescribers_prescriberorganization"."website",
                 "prescribers_prescriberorganization"."description",
                 "prescribers_prescriberorganization"."code_safir_pole_emploi",
                 "prescribers_prescriberorganization"."created_by_id",
                 "prescribers_prescriberorganization"."authorization_status",
                 "prescribers_prescriberorganization"."authorization_updated_at",
                 "prescribers_prescriberorganization"."authorization_updated_by_id",
                 "prescribers_prescriberorganization"."is_gps_authorized",
                 "companies_company"."id",
                 "companies_company"."address_line_1",
                 "companies_company"."address_line_2",
                 "companies_company"."post_code",
                 "companies_company"."city",
                 "companies_company"."department",
                 "companies_company"."coords",
                 "companies_company"."geocoding_score",
                 "companies_company"."geocoding_updated_at",
                 "companies_company"."ban_api_resolved_address",
                 "companies_company"."insee_city_id",
                 "companies_company"."name",
                 "companies_company"."created_at",
                 "companies_company"."updated_at",
                 "companies_company"."uid",
                 "companies_company"."active_members_email_reminder_last_sent_at",
                 "companies_company"."automatic_geocoding_update",
                 "companies_company"."siret",
                 "companies_company"."naf",
                 "companies_company"."kind",
                 "companies_company"."brand",
                 "companies_company"."phone",
                 "companies_company"."email",
                 "companies_company"."auth_email",
                 "companies_company"."website",
                 "companies_company"."description",
                 "companies_company"."provided_support",
                 "companies_company"."source",
                 "companies_company"."created_by_id",
                 "companies_company"."block_job_applications",
                 "companies_company"."job_applications_blocked_at",
                 "companies_company"."spontaneous_applications_open_since",
                 "companies_company"."convention_id",
                 "companies_company"."job_app_score",
                 "companies_company"."is_searchable",
                 "companies_company"."rdv_solidarites_id",
                 "companies_company"."fields_history"
          FROM "eligibility_eligibilitydiagnosis"
          LEFT OUTER JOIN "companies_company" ON ("eligibility_eligibilitydiagnosis"."author_siae_id" = "companies_company"."id")
          INNER JOIN "users_user" T4 ON ("eligibility_eligibilitydiagnosis"."author_id" = T4."id")
          LEFT OUTER JOIN "prescribers_prescriberorganization" ON ("eligibility_eligibilitydiagnosis"."author_prescriber_organization_id" = "prescribers_prescriberorganization"."id")
          WHERE (("eligibility_eligibilitydiagnosis"."author_kind" = %s
                  OR "eligibility_eligibilitydiagnosis"."author_siae_id" = %s)
                 AND "eligibility_eligibilitydiagnosis"."job_seeker_id" = %s
                 AND "eligibility_eligibilitydiagnosis"."expires_at" > %s)
          ORDER BY 10 DESC,
                   "eligibility_eligibilitydiagnosis"."created_at" DESC
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'AcceptForm.__init__[www/apply/forms.py]',
          'ContractInfosForAcceptView.get_forms[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "companies_jobdescription"."id",
                 "companies_jobdescription"."appellation_id",
                 "companies_jobdescription"."company_id",
                 "companies_jobdescription"."created_at",
                 "companies_jobdescription"."updated_at",
                 "companies_jobdescription"."is_active",
                 "companies_jobdescription"."last_employer_update_at",
                 "companies_jobdescription"."custom_name",
                 "companies_jobdescription"."description",
                 "companies_jobdescription"."ui_rank",
                 "companies_jobdescription"."contract_type",
                 "companies_jobdescription"."other_contract_type",
                 "companies_jobdescription"."location_id",
                 "companies_jobdescription"."hours_per_week",
                 "companies_jobdescription"."open_positions",
                 "companies_jobdescription"."profile_description",
                 "companies_jobdescription"."is_resume_mandatory",
                 "companies_jobdescription"."is_qpv_mandatory",
                 "companies_jobdescription"."market_context_description",
                 "companies_jobdescription"."source_id",
                 "companies_jobdescription"."source_kind",
                 "companies_jobdescription"."source_url",
                 "companies_jobdescription"."source_tags",
                 "companies_jobdescription"."field_history",
                 "companies_jobdescription"."creation_source",
                 "jobs_appellation"."updated_at",
                 "jobs_appellation"."code",
                 "jobs_appellation"."name",
                 "jobs_appellation"."rome_id",
                 "jobs_appellation"."full_text",
                 "cities_city"."id",
                 "cities_city"."name",
                 "cities_city"."normalized_name",
                 "cities_city"."slug",
                 "cities_city"."department",
                 "cities_city"."post_codes",
                 "cities_city"."code_insee",
                 "cities_city"."coords",
                 "cities_city"."edition_mode",
                 "cities_city"."last_synced_at"
          FROM "companies_jobdescription"
          INNER JOIN "jobs_appellation" ON ("companies_jobdescription"."appellation_id" = "jobs_appellation"."code")
          LEFT OUTER JOIN "cities_city" ON ("companies_jobdescription"."location_id" = "cities_city"."id")
          WHERE "companies_jobdescription"."company_id" = %s
          ORDER BY "companies_jobdescription"."custom_name" ASC,
                   "companies_jobdescription"."is_active" ASC
        ''',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_commune"."id",
                 "asp_commune"."start_date",
                 "asp_commune"."end_date",
                 "asp_commune"."code",
                 "asp_commune"."name",
                 "asp_commune"."normalized_name",
                 "asp_commune"."created_at",
                 "asp_commune"."city_id",
                 "asp_commune"."ignore"
          FROM "asp_commune"
          WHERE (NOT ("asp_commune"."ignore")
                 AND "asp_commune"."id" = %s)
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_country"."id",
                 "asp_country"."code",
                 "asp_country"."name",
                 "asp_country"."group",
                 "asp_country"."department"
          FROM "asp_country"
          WHERE "asp_country"."id" = %s
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'CommuneQuerySet.by_insee_code_and_period[asp/models.py]',
          'BirthPlaceWithoutBirthdateModelForm.clean[asp/forms.py]',
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT "asp_commune"."id",
                 "asp_commune"."start_date",
                 "asp_commune"."end_date",
                 "asp_commune"."code",
                 "asp_commune"."name",
                 "asp_commune"."normalized_name",
                 "asp_commune"."created_at",
                 "asp_commune"."city_id",
                 "asp_commune"."ignore"
          FROM "asp_commune"
          WHERE (NOT ("asp_commune"."ignore")
                 AND "asp_commune"."code" = %s
                 AND "asp_commune"."start_date" <= %s
                 AND ("asp_commune"."end_date" IS NULL
                      OR "asp_commune"."end_date" >= %s))
          LIMIT 21
        ''',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "asp_commune"
          WHERE "asp_commune"."id" = %s
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "asp_country"
          WHERE "asp_country"."id" = %s
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__enter__[<site-packages>/django/db/transaction.py]',
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': '''
          SELECT %s AS "_check"
          WHERE COALESCE((%s = %s), %s)
          ORDER BY RANDOM() ASC
        ''',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
          'ContractInfosForAcceptView.missing_or_invalid_job_seeker_infos[www/apply/views/common.py]',
          'ContractInfosForAcceptView.get[www/apply/views/common.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Atomic.__exit__[<site-packages>/django/db/transaction.py]',
        ]),
        'sql': 'RELEASE SAVEPOINT "<snapshot>"',
      }),
      dict({
        'origin': list([
          'Company.has_job_descriptions_not_updated_recently[companies/models.py]',
          'IfNode[layout/base.html]',
          'BlockNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_contract_infos_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "companies_jobdescription"
          WHERE ("companies_jobdescription"."company_id" = %s
                 AND "companies_jobdescription"."is_active"
                 AND "companies_jobdescription"."last_employer_update_at" < %s)
          LIMIT 1
        ''',
      }),
      dict({
        'origin': list([
          'Company.has_admin[common_apps/organizations/models.py]',
          'Company.convention_can_be_accessed_by[companies/models.py]',
          'nav[utils/templatetags/nav.py]',
          'InclusionNode[layout/_header_authenticated.html]',
          'IncludeNode[layout/base.html]',
          'IfNode[layout/base.html]',
          'ExtendsNode[apply/process_base.html]',
          'ExtendsNode[apply/process_accept_base.html]',
          'ExtendsNode[apply/process_accept_contract_infos_step.html]',
        ]),
        'sql': '''
          SELECT %s AS "a"
          FROM "users_user"
          INNER JOIN "companies_companymembership" ON ("users_user"."id" = "companies_companymembership"."user_id")
          WHERE ("companies_companymembership"."id" IN
                   (SELECT U0."id"
                    FROM "companies_companymembership" U0
                    INNER JOIN "users_user" U1 ON (U0."user_id" = U1."id")
                    WHERE (U1."is_active"
                           AND U0."is_active"
                           AND U0."company_id" = %s
                           AND U0."is_admin"
                           AND U1."is_active"))
                 AND "users_user"."id" = %s)
          LIMIT 1
        ''',
      }),
    ]),
  })
# ---
# name: test_reload_contract_type_and_options[APPRENTICESHIP]
  '''
  
  <div id="geiq_contract_type_and_options_block">
      <div class="form-group is-invalid form-group-required"><label class="form-label" for="id_prehiring_guidance_days">Nombre de jours daccompagnement avant contrat</label><input type="number" name="prehiring_guidance_days" min="0" class="form-control is-invalid" required aria-invalid="true" aria-describedby="id_prehiring_guidance_days_helptext id_prehiring_guidance_days_error" id="id_prehiring_guidance_days">
      <div id="id_prehiring_guidance_days_error" class="w-100">
          
              <div class="invalid-feedback d-block">Ce champ est obligatoire.</div>
          
      </div>
  
  <div id="id_prehiring_guidance_days_helptext" class="form-text">Laissez "0" si vous n'avez pas accompagn le candidat avant son embauche</div>
  </div>
      <div class="form-group form-group-required"><label class="form-label" for="id_contract_type">Type de contrat</label><select name="contract_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_contract_type_and_options" hx-swap="outerHTML" hx-select="#geiq_contract_type_and_options_block" hx-target="#geiq_contract_type_and_options_block" class="form-select is-valid" required id="id_contract_type">
    <option value="">---------</option>
  
    <option value="APPRENTICESHIP" selected>Contrat d&#x27;apprentissage</option>
  
    <option value="PROFESSIONAL_TRAINING">Contrat de professionalisation</option>
  
    <option value="OTHER">Autre type de contrat</option>
  
  </select></div>
      <div class="form-group"><div class="form-check"><input type="checkbox" name="inverted_vae_contract" class="form-check-input is-valid" disabled id="id_inverted_vae_contract"><label class="form-check-label" for="id_inverted_vae_contract">Contrat associ  une VAE inverse</label></div></div>
      
      <div class="form-group form-group-required"><label class="form-label" for="id_nb_hours_per_week">Nombre d&#x27;heures par semaine</label><input type="number" name="nb_hours_per_week" min="0" class="form-control is-valid" required id="id_nb_hours_per_week"></div>
  </div>
  
  '''
# ---
# name: test_reload_contract_type_and_options[OTHER]
  '''
  
  <div id="geiq_contract_type_and_options_block">
      <div class="form-group is-invalid form-group-required"><label class="form-label" for="id_prehiring_guidance_days">Nombre de jours daccompagnement avant contrat</label><input type="number" name="prehiring_guidance_days" min="0" class="form-control is-invalid" required aria-invalid="true" aria-describedby="id_prehiring_guidance_days_helptext id_prehiring_guidance_days_error" id="id_prehiring_guidance_days">
      <div id="id_prehiring_guidance_days_error" class="w-100">
          
              <div class="invalid-feedback d-block">Ce champ est obligatoire.</div>
          
      </div>
  
  <div id="id_prehiring_guidance_days_helptext" class="form-text">Laissez "0" si vous n'avez pas accompagn le candidat avant son embauche</div>
  </div>
      <div class="form-group form-group-required"><label class="form-label" for="id_contract_type">Type de contrat</label><select name="contract_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_contract_type_and_options" hx-swap="outerHTML" hx-select="#geiq_contract_type_and_options_block" hx-target="#geiq_contract_type_and_options_block" class="form-select is-valid" required id="id_contract_type">
    <option value="">---------</option>
  
    <option value="APPRENTICESHIP">Contrat d&#x27;apprentissage</option>
  
    <option value="PROFESSIONAL_TRAINING">Contrat de professionalisation</option>
  
    <option value="OTHER" selected>Autre type de contrat</option>
  
  </select></div>
      <div class="form-group"><div class="form-check"><input type="checkbox" name="inverted_vae_contract" class="form-check-input is-valid" disabled id="id_inverted_vae_contract"><label class="form-check-label" for="id_inverted_vae_contract">Contrat associ  une VAE inverse</label></div></div>
      
          <div id="contractTypeDetails"><div class="form-group"><label class="form-label" for="id_contract_type_details">Prcisions sur le type de contrat</label><textarea name="contract_type_details" cols="40" rows="2" class="form-control is-valid" aria-describedby="id_contract_type_details_helptext" id="id_contract_type_details">
  </textarea><div id="id_contract_type_details_helptext" class="form-text">Si vous avez choisi un autre type de contrat, merci de bien vouloir fournir plus de prcisions</div>
  </div></div>
      
      <div class="form-group form-group-required"><label class="form-label" for="id_nb_hours_per_week">Nombre d&#x27;heures par semaine</label><input type="number" name="nb_hours_per_week" min="0" class="form-control is-valid" required id="id_nb_hours_per_week"></div>
  </div>
  
  '''
# ---
# name: test_reload_contract_type_and_options[PROFESSIONAL_TRAINING]
  '''
  
  <div id="geiq_contract_type_and_options_block">
      <div class="form-group is-invalid form-group-required"><label class="form-label" for="id_prehiring_guidance_days">Nombre de jours daccompagnement avant contrat</label><input type="number" name="prehiring_guidance_days" min="0" class="form-control is-invalid" required aria-invalid="true" aria-describedby="id_prehiring_guidance_days_helptext id_prehiring_guidance_days_error" id="id_prehiring_guidance_days">
      <div id="id_prehiring_guidance_days_error" class="w-100">
          
              <div class="invalid-feedback d-block">Ce champ est obligatoire.</div>
          
      </div>
  
  <div id="id_prehiring_guidance_days_helptext" class="form-text">Laissez "0" si vous n'avez pas accompagn le candidat avant son embauche</div>
  </div>
      <div class="form-group form-group-required"><label class="form-label" for="id_contract_type">Type de contrat</label><select name="contract_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_contract_type_and_options" hx-swap="outerHTML" hx-select="#geiq_contract_type_and_options_block" hx-target="#geiq_contract_type_and_options_block" class="form-select is-valid" required id="id_contract_type">
    <option value="">---------</option>
  
    <option value="APPRENTICESHIP">Contrat d&#x27;apprentissage</option>
  
    <option value="PROFESSIONAL_TRAINING" selected>Contrat de professionalisation</option>
  
    <option value="OTHER">Autre type de contrat</option>
  
  </select></div>
      <div class="form-group"><div class="form-check"><input type="checkbox" name="inverted_vae_contract" class="form-check-input is-valid" id="id_inverted_vae_contract"><label class="form-check-label" for="id_inverted_vae_contract">Contrat associ  une VAE inverse</label></div></div>
      
      <div class="form-group form-group-required"><label class="form-label" for="id_nb_hours_per_week">Nombre d&#x27;heures par semaine</label><input type="number" name="nb_hours_per_week" min="0" class="form-control is-valid" required id="id_nb_hours_per_week"></div>
  </div>
  
  '''
# ---
# name: test_reload_qualification_fields[CCN]
  '''
  
  <div id="geiq_qualification_fields_block">
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_type">Type de qualification vis</label><select name="qualification_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_qualification_fields" hx-swap="outerHTML" hx-select="#geiq_qualification_fields_block" hx-target="#geiq_qualification_fields_block" class="form-select is-valid" required id="id_qualification_type">
    <option value="">---------</option>
  
    <option value="STATE_DIPLOMA">Diplme d&#x27;tat ou titre homologu</option>
  
    <option value="CQP">CQP</option>
  
    <option value="CCN" selected>Positionnement de CCN</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_level">Niveau de qualification</label><select name="qualification_level" class="form-select is-valid" required id="id_qualification_level">
    <option value="" selected>---------</option>
  
    <option value="LEVEL_3">Niveau 3 (CAP, BEP)</option>
  
    <option value="LEVEL_4">Niveau 4 (BP, Bac gnral, Techno ou Pro, BT)</option>
  
    <option value="LEVEL_5">Niveau 5 ou + (Bac+2 ou +)</option>
  
    <option value="NOT_RELEVANT">Non concern</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_planned_training_hours">Nombre d&#x27;heures de formation prvues</label><input type="number" name="planned_training_hours" value="0" min="0" class="form-control is-valid" required id="id_planned_training_hours"></div>
  </div>
  
  '''
# ---
# name: test_reload_qualification_fields[CQP]
  '''
  
  <div id="geiq_qualification_fields_block">
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_type">Type de qualification vis</label><select name="qualification_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_qualification_fields" hx-swap="outerHTML" hx-select="#geiq_qualification_fields_block" hx-target="#geiq_qualification_fields_block" class="form-select is-valid" required id="id_qualification_type">
    <option value="">---------</option>
  
    <option value="STATE_DIPLOMA">Diplme d&#x27;tat ou titre homologu</option>
  
    <option value="CQP" selected>CQP</option>
  
    <option value="CCN">Positionnement de CCN</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_level">Niveau de qualification</label><select name="qualification_level" class="form-select is-valid" required id="id_qualification_level">
    <option value="" selected>---------</option>
  
    <option value="LEVEL_3">Niveau 3 (CAP, BEP)</option>
  
    <option value="LEVEL_4">Niveau 4 (BP, Bac gnral, Techno ou Pro, BT)</option>
  
    <option value="LEVEL_5">Niveau 5 ou + (Bac+2 ou +)</option>
  
    <option value="NOT_RELEVANT">Non concern</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_planned_training_hours">Nombre d&#x27;heures de formation prvues</label><input type="number" name="planned_training_hours" value="0" min="0" class="form-control is-valid" required id="id_planned_training_hours"></div>
  </div>
  
  '''
# ---
# name: test_reload_qualification_fields[STATE_DIPLOMA]
  '''
  
  <div id="geiq_qualification_fields_block">
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_type">Type de qualification vis</label><select name="qualification_type" hx-trigger="change" hx-post="/apply/10/accept/7614fc4b-aef9-4694-ab17-12324300180a/reload_qualification_fields" hx-swap="outerHTML" hx-select="#geiq_qualification_fields_block" hx-target="#geiq_qualification_fields_block" class="form-select is-valid" required id="id_qualification_type">
    <option value="">---------</option>
  
    <option value="STATE_DIPLOMA" selected>Diplme d&#x27;tat ou titre homologu</option>
  
    <option value="CQP">CQP</option>
  
    <option value="CCN">Positionnement de CCN</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_qualification_level">Niveau de qualification</label><select name="qualification_level" class="form-select is-valid" required id="id_qualification_level">
    <option value="" selected>---------</option>
  
    <option value="LEVEL_3">Niveau 3 (CAP, BEP)</option>
  
    <option value="LEVEL_4">Niveau 4 (BP, Bac gnral, Techno ou Pro, BT)</option>
  
    <option value="LEVEL_5">Niveau 5 ou + (Bac+2 ou +)</option>
  
  </select></div>
      <div class="form-group form-group-required"><label class="form-label" for="id_planned_training_hours">Nombre d&#x27;heures de formation prvues</label><input type="number" name="planned_training_hours" value="0" min="0" class="form-control is-valid" required id="id_planned_training_hours"></div>
  </div>
  
  '''
# ---
